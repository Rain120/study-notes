#### å‰è¨€

**ä»£ç é£æ ¼** (`Programming style` / `code style`)å³[ç¨‹åº](https://zh.wikipedia.org/wiki/ç¨‹åº)å¼€å‘äººå‘˜æ‰€ç¼–å†™æºä»£ç çš„ä¹¦å†™é£æ ¼ã€‚è‰¯å¥½ä»£ç é£æ ¼çš„ç‰¹ç‚¹æ˜¯ä½¿ä»£ç æ˜“è¯»ã€‚

æ€»ç»“ç¨‹åºè®¾è®¡å®è·µä¸­çš„ç»éªŒï¼Œä»£ç é£æ ¼çš„è¦ç´ åŒ…æ‹¬ï¼ˆä½†ä¸é™äºï¼‰ä»¥ä¸‹å‡ ç‚¹ï¼š

- åå­—çš„ä½¿ç”¨ï¼ˆå‚è§ï¼š[é©¼å³°å¼å¤§å°å†™](https://zh.wikipedia.org/wiki/é§å³°å¼å¤§å°å¯«)ã€[æ ‡è¯†ç¬¦å‘½åçº¦å®š](https://zh.wikipedia.org/w/index.php?title=æ ‡è¯†ç¬¦å‘½åçº¦å®š&action=edit&redlink=1)ã€[åŒˆç‰™åˆ©å‘½åæ³•](https://zh.wikipedia.org/wiki/åŒˆç‰™åˆ©å‘½åæ³•)ï¼‰
- å¸¸é‡çš„ä½¿ç”¨
- [è¡¨è¾¾å¼](https://zh.wikipedia.org/wiki/è¡¨è¾¾å¼)ä¸è¯­å¥
- æ³¨é‡Šçš„ä½¿ç”¨
- [ç¼©è¿›](https://zh.wikipedia.org/wiki/ç¼©è¿›)ï¼ˆå‚è§ï¼š[ç¼©è¿›é£æ ¼](https://zh.wikipedia.org/wiki/ç¼©è¿›é£æ ¼)ï¼‰
- ä»£ç çš„å¸ƒå±€

ä¸‹é¢æˆ‘ä»¬å°†é€šè¿‡ä»¥ä¸Šå‡ ç‚¹æ¥ä»‹ç»æˆ‘å¯¹ **ä»£ç é£æ ¼** çš„ä¸€äº›ç†è§£å’Œä¸ªäººå»ºè®®ã€‚

#### å‘½å

æˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºä¸€æ ·ç‰©å“ï¼Œä¸€ä¸ªç”Ÿç‰©æ¥è¯´ï¼Œä¸€ä¸ªå¥½çš„åå­—å¯ä»¥è®©ä½ æ›´å¿«çš„è®°ä½ä»–ï¼Œè®¤è¯†ä»–ï¼Œè¿™ä¸ªè§„åˆ™ï¼Œåœ¨ä»£ç é‡Œé¢ä¹Ÿé€‚åº”ã€‚

##### å‘½åé£æ ¼

![code-name-style](./images/code-name-style.png)

[`@tinyfe/naming-transform` æ–‡æ¡£](https://github.com/tinyfe/one-utils/blob/main/packages/naming-transform/README.md#%E5%91%BD%E5%90%8D%E9%A3%8E%E6%A0%BCnaming-style)

##### å‘½åä¹ æƒ¯å»ºè®®

è§„åˆ™: **åŠ¨è¯ + åè¯(æè¿°) + çŠ¶æ€**ï¼Œè§„åˆ™åŒæ ·é€‚åˆå‡½æ•°ã€‚

- è§‚å¯Ÿå˜é‡æ„æ€æ˜¯ä»€ä¹ˆï¼Œæ¯”å¦‚è¯´ï¼Œå˜é‡å¤§æ¦‚æ˜¯è¦è¡¨ç¤ºå·¥ä½œçš„æ„æ€ã€‚
- è§‚å¯Ÿå˜é‡çŠ¶æ€æ˜¯ä»€ä¹ˆï¼Œæ¯”å¦‚è¯´ï¼Œå·¥ä½œçš„çŠ¶æ€æ˜¯æ­£åœ¨è¿›è¡Œä¸­ï¼Œè¿˜æ˜¯è¡¨ç¤ºå·¥ä½œè¿‡ã€‚
- è§‚å¯Ÿå˜é‡ç±»å‹æ˜¯ä»€ä¹ˆï¼Œæ¯”å¦‚è¯´ï¼Œæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œ`Boolean `, etc.

ä»ä¸Šé¢çš„è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆæ‹†è§£è¿™ä¸ªå˜é‡ï¼Œ**æ˜¯å¦( --> is)** **æ­£åœ¨(ing)** **å·¥ä½œ(work)**ï¼Œæ‰€ä»¥å¯ä»¥å‘½åä¸º `isWorking` ã€‚

ä¸€ä¸ªå˜é‡å«ä»€ä¹ˆï¼Œå–å†³äºï¼Œä½ å¯¹ä»–æ€ä¹ˆå®šæ€§ï¼Œå°±å¥½åƒï¼Œä½ ç»™ä¸€ä¸ªå°å§å§å»åˆ«åï¼Œä¸ä¼šå«äºŒç‹—å­å§(ä½ è‚¯å®šä¼šè¢«æ‰“æ­»çš„)ï¼Œä½ ä¼šå–ä¸€ä¸ªï¼Œå¥³æ€§ï¼Œå’Œå¥¹æ€§æ ¼å¾ˆè¿‘çš„åå­—ï¼Œæ¯”å¦‚è¯´ **çŒªçŒª(ğŸ·)å¥³å­©** ã€‚

**å‘½åä¸ªäººæ¨è**

- å˜é‡
  - å¼€å¤´: `is` `has` `get` `can` `blabla....`, etc: `isStudent`, `hasGF`, `canSet` ...
  - ç»“å°¾: åŠ¨è¯ï¼Œåè¯ï¼Œ`ing` `ed` etc: `isEditing`, `isDisabled`
- å‡½æ•°
  - å¼€å¤´: `get` `set` `on` `handle`  `blabla....`, etc: `getUserName`, `setUserInfo`, `onClick`, `handleOnTreeProcess` ....
  - ç»“å°¾: åŠ¨è¯ï¼Œåè¯

##### å¸¸è§è¯æ±‡

- æ•°æ®æ“ä½œï¼š`get` / `set` / `open` / `close` / `handle` / `make` / `computed` 
- å¢åŠ ï¼š`add` / `create` / `insert` / `push` 
- åˆ é™¤ï¼š`remove` / `destory` / `delete` / `split` 
- åˆ¤æ–­: `is` /  `has` / `can` / `should` / `check` / `enable` / `with` / `allow` / `could`

##### åœºæ™¯åˆ†ç±»

- äº‹ä»¶å¤„ç†

  åŸç”Ÿäº‹ä»¶ï¼Œä¸»åŠ¨ç›‘å¬ï¼Œé‡‡ç”¨ `onXXX`, e.g. `onClick`

  è‡ªå®šä¹‰äº‹ä»¶,è¢«åŠ¨å¤„ç†ï¼Œé‡‡ç”¨ `handleXXX`, e.g. `handleInputChange`

- çŠ¶æ€

  é€šå¸¸ç”¨æ¥æè¿°å®ä½“ï¼ˆä¾‹å¦‚ï¼šHTMLæ ‡ç­¾ã€ç»„ä»¶ã€å¯¹è±¡ï¼‰çš„åŠŸèƒ½å±æ€§ï¼Œè€Œä¸”å®šæ³•æ¯”è¾ƒå›ºå®šï¼Œå½“ç„¶äº†ï¼Œè¿™é‡Œ

  ```json
  {
    disabled: 'æ˜¯å¦ç¦ç”¨',
    editable: 'æ˜¯å¦å¯ç¼–è¾‘',
    clearable: 'æ˜¯å¦å¯æ¸…é™¤',
    readonly: 'åªè¯»',
    expandable: 'æ˜¯å¦å¯å±•å¼€',
    checked: 'æ˜¯å¦é€‰ä¸­',
    enumberable: 'æ˜¯å¦å¯æšä¸¾',
    iterable: 'æ˜¯å¦å¯è¿­ä»£',
    clickable: 'æ˜¯å¦å¯ç‚¹å‡»',
    draggable: 'æ˜¯å¦å¯æ‹–æ‹½'
  }
  ```

- è¿›è¡Œä¸­ï¼Œè¿‡å»å¼

  å¯ä»¥ä½¿ç”¨`ed` `ing`ç­‰æœ‰å…³äºçŠ¶æ€è¿›è¡Œæ—¶çš„æè¿°ã€‚

  ```json
  {
      isEditing: 'æ˜¯å¦ç¼–è¾‘ä¸­',
      isEdited: 'æ˜¯å¦å·²ç¼–è¾‘',
  
      isChecked: 'æ˜¯å¦é€‰ä¸­',
      isChecking: 'æ˜¯å¦æ­£åœ¨é€‰æ‹©ä¸­',
  
      isCleared: 'æ˜¯å¦å·²æ¸…é™¤',
      isShow: 'æ˜¯å¦æ˜¾ç¤º',
      isVisible: 'æ˜¯å¦å¯è§',
      isLoading: 'æ˜¯å¦å¤„äºåŠ è½½ä¸­',
      isConnecting: 'æ˜¯å¦å¤„äºè¿æ¥ä¸­',
      isValidating: 'æ­£åœ¨éªŒè¯ä¸­',
      isRunning: 'æ­£åœ¨è¿è¡Œä¸­',
      isListening: 'æ­£åœ¨ç›‘å¬ä¸­'
  }
  ```

- é…ç½®ç±»ã€é€‰é¡¹ç±»

  ä¸»è¦æ˜¯æŒ‡ç»„ä»¶åŠŸèƒ½çš„å¼€å¯ä¸å…³é—­ï¼ŒåŠŸèƒ½å±æ€§çš„é…ç½®ã€‚å¯ä»¥ä½¿ç”¨çš„ï¼š`with`/`enable`/`allow`/`can`/`check`

  ```json
  {
    withTab: 'æ˜¯å¦å¸¦é€‰é¡¹å¡',
    withoutTab: 'ä¸å¸¦é€‰é¡¹å¡',
    enableFilter: 'å¼€å¯è¿‡æ»¤',
    allownCustomScale: 'å…è®¸è‡ªå®šä¹‰ç¼©æ”¾',
    shouldClear: 'æ˜¯å¦æ¸…é™¤',
    canSelectItem: 'æ˜¯å¦èƒ½é€‰ä¸­å…ƒç´ ',
    noColon: 'ä¸æ˜¾ç¤ºlabelåé¢çš„å†’å·',
    checkJs: 'æ£€æŸ¥Js',
  }
  ```

  å¦‚æœå«Œåˆ†ç±»å¤ªå¤šï¼Œå¯ä»¥åªä½¿ç”¨å…¶ä¸­ä¸€ç§æ–¹å¼ï¼Œæ¯”å¦‚åœ¨`Typescript`ä¸­ä½¿ç”¨äº† `allownXx`,`checkJs` å’Œ `noXx`ã€‚

- å¼‚æ­¥å¤„ç†

  ä¸»è¦æ˜¯æŒ‡åœ¨å†™æ•°æ®å±‚æœåŠ¡ã€çŠ¶æ€ç®¡ç†ä¸­çš„`Action`å‘½åï¼Œä»¥åŠ`Ajax`å›è°ƒçš„å‘½åè§„åˆ™ï¼Œå‘½åä¸»è¦å›´ç»•æ•°æ®çš„å¢åˆ æŸ¥æ‰¾æ¥åˆ’åˆ†ï¼Œè·å–æ•°æ®é€šå¸¸æ˜¯ `getXx` å’Œ `fetchXx`ï¼Œçœ‹ä¸ªäººå–œå¥½ä½†æ˜¯è¦ç»Ÿä¸€

  ```json
  {
      getUsers: 'è·å–ç”¨æˆ·åˆ—è¡¨',
      fetchUsers: 'è·å–ç”¨æˆ·åˆ—è¡¨',
  }
  ```

- è·³è½¬

  å¸¸è§åŠ¨ä½œï¼š`to` / `navigate` / `jump` / `go` / `redirect` / `switch` / `back`

  ```json
  {
    toTplDetail: 'è·³è½¬åˆ°æ¨¡æ¿è¯¦æƒ…é¡µé¢',
    navigateToHome: 'å¯¼èˆªåˆ°é¦–é¡µ',
    jumpHome: 'è·³è½¬é¦–é¡µ',
    goHome: 'è·³è½¬é¦–é¡µ',
    redirectToLogin: 'é‡å®šå‘åˆ°ç™»å½•é¡µ',
    switchTab: 'åˆ‡æ¢Tabé€‰é¡¹å¡',
    backHome: 'å›åˆ°ä¸»é¡µ'
  }
  ```

  

#### å˜é‡

##### å®šä¹‰å˜é‡

- æ€»æ˜¯ä½¿ç”¨`const`æˆ– `let` æ¥å£°æ˜å˜é‡ã€‚ä¸è¿™æ ·åšä¼šå¯¼è‡´å…¨å±€å˜é‡ã€‚æˆ‘ä»¬å¸Œæœ›é¿å…æ±¡æŸ“å…¨å±€åç§°ç©ºé—´ã€‚`eslint: no-undef no-var prefer-const`

  ```js
  // bad
  superPower = new SuperPower();
  var captain = new Captain();
  
  // good
  const superPower = new SuperPower();
  let captain = new Captain();
  ```

- æ€»æ˜¯å•ç‹¬å£°æ˜å˜é‡ï¼Œä¸å»ºè®®åˆ†ç»„ã€‚

  ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºè¿™æ ·åœ¨é‡æ„ï¼Œè°ƒæ•´ä½ç½®ï¼Œåˆ é™¤ï¼Œ`debugger`ç­‰åœºæ™¯ä¸‹ï¼Œä½ éƒ½ä¼šæœ‰å¾ˆå¥½çš„ä½“éªŒï¼Œä¹Ÿä¸ä¼šæœ‰åˆ†éš”ç¬¦`,` ï¼Œ`;`ç­‰å…¶ä»–åˆ†éš”ç¬¦çš„å·®å¼‚ã€‚

  ```js
  // bad
  const items = getItems(),
      goSportsTeam = true,
      dragonball = 'z';
  
  // bad
  // (compare to above, and try to spot the mistake)
  const items = getItems(),
      goSportsTeam = true;
      dragonball = 'z';
  
  // good
  const items = getItems();
  const goSportsTeam = true;
  const dragonball = 'z';
  
  ```

- ä¸è®¸é“¾å¼å£°æ˜ä¸€ä¸ªå˜é‡ `eslint: no-multi-assign `

  ä¸ºä»€ä¹ˆ?é“¾æ¥å˜é‡èµ‹å€¼ä¼šåˆ›å»ºéšå¼å…¨å±€å˜é‡ã€‚

  ```js
  // bad
  (function example() {
    // JavaScript interprets this as
    // let a = ( b = ( c = 1 ) );
    // The let keyword only applies to variable a; variables b and c become
    // global variables.
    let a = b = c = 1;
  }());
  
  console.log(a); // throws ReferenceError
  console.log(b); // 1
  console.log(c); // 1
  
  // good
  (function example() {
    let a = 1;
    let b = a;
    let c = a;
  }());
  
  console.log(a); // throws ReferenceError
  console.log(b); // throws ReferenceError
  console.log(c); // throws ReferenceError
  
  // the same applies for `const`
  ```

#### å¸¸é‡

- å®šä¹‰å¸¸é‡ä½¿ç”¨`const`å…³é”®è¯
- å®šä¹‰å¸¸é‡ä½¿ç”¨**å¤§å†™è‹±æ–‡å­—æ¯**, å°½é‡è§åçŸ¥æ„ï¼Œæ¯ä¸ªå•è¯ä¹‹é—´ç”¨ `_` åˆ†éš”ã€‚
- å¸¸é‡ä¸èƒ½é‡å¤å®šä¹‰å’Œä¸èƒ½è¢«æ”¹å˜

```js
const SOME_DAY_I_CAN_GET_IT = true;
```

#### è¯­å¥

åœ¨è®¡ç®—æœºç¨‹åºè®¾è®¡ä¸­ï¼Œè¯­å¥æ˜¯å‘½ä»¤å¼ç¼–ç¨‹è¯­è¨€çš„ä¸€ä¸ªè¯­æ³•å•å…ƒï¼Œå®ƒè¡¨è¾¾äº†è¦æ‰§è¡Œçš„ä¸€äº›åŠ¨ä½œï¼Œè¯­å¥å¯ä»¥æœ‰å†…éƒ¨ç»„ä»¶(ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼)ã€‚å®ƒåˆ†ä¸ºå—è¯­å¥(å¤šè¡Œ)å’Œå•è¡Œè¯­å¥ã€‚

##### è¡Œé•¿åº¦

åœ¨è¯­å¥ä¸­ï¼Œæˆ‘ä»¬ä¹ æƒ¯çš„æ˜¯ï¼Œå°½é‡ä¿è¯å•è¡Œè¯­å¥åœ¨ `80-120`å­—çš„èŒƒå›´å†…ã€‚ä¸ºä»€ä¹ˆè¦å±€é™äºæŸä¸€ä¸ªèŒƒå›´å‘¢ï¼Ÿæˆ‘çš„ç†è§£æ˜¯ï¼Œè®©é‡ç‚¹åœ¨å¯è§†åŒºåŸŸã€‚ä¸¾ä¸ªğŸŒ°ï¼š

ğŸ‘‡ æ˜¯ä¸€ä¸ªç­›é€‰çš„ä¾‹å­ï¼Œæˆ‘ä»¬ä¼šä»å­¦ç”Ÿåˆ—è¡¨ä¸­å–å‡º ç”·æ€§ï¼Œå¹´é¾„å¤§äº25å²ï¼Œå·¥ä½œå¹´é™å¤§äº3å¹´ `(æ²¡æœ‰æ€§åˆ«æ­§è§†ï¼Œå°±æ˜¯éšæœºæƒ³çš„ä¸€ä¸ªğŸŒ°)`

```js
function getInfoByMoreFilterFromStudentListAndFormat(list) {
  return list.filter(Boolean).filter(item => item.age > 25 && item.gender === 'male' && item.work > 3);
}
```

å½“ä½ çœ‹åˆ°è¿™ä¸²ä»£ç çš„æ—¶å€™ï¼Œå¤§å®¶é»˜è®¤æ˜¯ä»å·¦å¾€å³è¯»ï¼Œè¿™æ ·ä¸æ˜¯è¯´çœ‹ä¸æ‡‚ï¼Œä¸€ä¸ªå°±ç®€å•çš„é—®é¢˜ï¼Œä½ çš„è„–å­ç´¯ä¸ç´¯ï¼Œå“ˆå“ˆå“ˆï¼Œå¼€ç©ç¬‘ã€‚æ­§è§†æˆ‘æƒ³è¡¨è¾¾çš„æ˜¯ï¼Œè¿™æ ·ä½ ä¼šå¾ˆå®¹æ˜“ä¸¢å¤±é‡è¦ä¿¡æ¯ï¼Œä¹Ÿä¼šé—å¿˜ä¹‹å‰çœ‹äº†ä»€ä¹ˆã€‚

```js
function getInfoByMoreFilterFromStudentListAndFormat(list) {
  return list
    .filter(Boolean)
    .filter(
    	item => item.age > 25
    	&& item.gender === 'male'
    	&& item.work > 3
  	);
}
```

æˆ‘ä»¬é€šè¿‡è½¬æ¢å˜èº«ï¼ŒğŸ‘† è¿™ä¸ªä»£ç ä¼šè®©ä½ çœ‹èµ·æ¥é€»è¾‘æ›´æ¸…æ™°ï¼Œä½ åªéœ€è¦ç€é‡åœ¨æŸä¸€å¤„å³å¯ï¼Œä¸éœ€è¦è®°ä½ä¸€å¤§ä¸²çš„æ¡ä»¶ã€‚

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯¹å‡½æ•°å‚æ•°ä¹Ÿæœ‰å¦‚ä¸‹å»ºè®®ï¼š

- è¶…è¿‡**3/4ä¸ª**å‚æ•°æ—¶ï¼Œ**åˆå¹¶å‚æ•°åˆ—è¡¨**ï¼Œå½“ç„¶äº†ï¼Œæ€ä¹ˆåˆå¹¶ï¼Œå–å†³äºä½ çš„ç­–ç•¥ï¼Œæ€ä¹ˆåˆ†ç±»

  ```js
  function getParamsFromRouterQuery(router, keys = [], allExclude = true, once = false) {
      // ...
  }
  ```

  è½¬æ¢å

  ```js
  function getParamsFromRouterQuery(router, {keys = [], allExclude = true, once = false} = {}) {
      // ...
  }
  ```

- è¶…é•¿å‡½æ•°ï¼Œè®°å¾—æ¢è¡Œ

  ```js
  function getParamsFromRouterQuery(router, {keys = [], allExclude = true, once = false} = {}) {
      // ...
  }
  ```

  è½¬æ¢å

  ```js
  function getParamsFromRouterQuery(
      router, {
          keys = [],
          allExclude = true,
          once = false
      } = {}
  ) {
      // ...
  }
  ```

##### è¯­å¥å—

æˆ‘ä»¬å…ˆçœ‹ä¸‹ğŸ‘‡è¿™ä¸²ä»£ç ï¼Œæ„Ÿå—ä¸€ä¸‹

```js
// https://github.com/tinyfe/one-utils/blob/3d2bebb874e730256511e7a1d476f3ec9c60bb1c/packages/watermark/src/index.ts#L300
// ...
observerWaterMark(dom: HTMLElement | null = this.dom) {
  if (!dom) {
    throw new Error(`The dom value must be a HTMLElement, now is ${dom}`);
  }
  const { observer: observerCallback } = this.options;
  this.observer = new MutationObserver((mutations, observer) => {
    this.setWaterMark();
    observerCallback && observerCallback(mutations, observer);
    console.log('æ³•ç½‘æ¢æ¢ç–è€Œä¸æ¼, ä½ ä¸è¦ä¹±æ¥å“¦');
  });
  // ä»¥ä¸Šè¿°é…ç½®å¼€å§‹è§‚å¯Ÿç›®æ ‡èŠ‚ç‚¹
  this.observer.observe(dom, this.options.observerOptions);
}
// ...
```

ä¸çŸ¥é“ï¼Œä½ çœ‹ç€ä»–ä»€ä¹ˆæ„Ÿè§‰ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œå¾ˆè‡ƒè‚¿ï¼Œæ‰€æœ‰çš„ä¸œè¥¿éƒ½æ‰åœ¨ä¸€èµ·ï¼Œçœ‹èµ·æ¥å¾ˆéš¾å—ï¼Œä¸çŸ¥é“å¯ä»¥åœ¨å“ªé‡Œåœä¸‹æ¥æ€è€ƒï¼Œå¾—å…¨éƒ¨è®°ä½ï¼Œæ‰çŸ¥é“è¿™äº›æ˜¯å¹²å˜›çš„ã€‚

```js
// ...
observerWaterMark(dom: HTMLElement | null = this.dom) {
  if (!dom) {
    throw new Error(`The dom value must be a HTMLElement, now is ${dom}`);
  }

  const { observer: observerCallback } = this.options;

  this.observer = new MutationObserver((mutations, observer) => {
    this.setWaterMark();
    observerCallback && observerCallback(mutations, observer);
    
    console.log('æ³•ç½‘æ¢æ¢ç–è€Œä¸æ¼, ä½ ä¸è¦ä¹±æ¥å“¦');
  });

  // ä»¥ä¸Šè¿°é…ç½®å¼€å§‹è§‚å¯Ÿç›®æ ‡èŠ‚ç‚¹
  this.observer.observe(dom, this.options.observerOptions);
}
// ...
```

æˆ‘ä»¬è¿™æ ·ä¿®æ”¹ä¸€ä¸‹ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰æ¸…çˆ½å¤šäº†ã€‚æ‰€ä»¥æˆ‘çš„å»ºè®®æ˜¯ï¼Œ

- æ˜ç¡®åŒç±»çš„æ“ä½œï¼Œæ¯”å¦‚æ˜¯å£°æ˜æ”¾åœ¨ä¸€èµ·ï¼Œä»–ä»¬ä½œä¸º**ä¸€å—ä»£ç **

- **æ¯2ä¸ªå—ä¹‹é—´çš„ä»£ç ** æˆ–è€… **æ¯2ä¸åŒåˆ†ç±»çš„å˜é‡è¯­å¥çš„å£°æ˜ã€å¤„ç†** ä¹‹é—´ä¿ç•™ä¸€ä¸ªç©ºè¡Œ

  ```js
  const ASSIGN_TOTAL = 1;
  
  function dynamicAssign(assign = 1, options = {}) {
      // INFO: 0 ç›´æ¥å¤„ç† ä¸º total
      if (!assign) {
          return total;
      }
      // ğŸ‘‡å’ŒğŸ‘†æ˜¯ä¸¤ç±»ï¼Œæ‰€ä»¥æ­¤å¤„ä¿ç•™ä¸€ä¸ªç©ºæ ¼
      const {
          total = ASSIGN_TOTAL, fixed = 3
      } = options;
      // ğŸ‘‡å’ŒğŸ‘†æ˜¯ä¸¤ç±»ï¼Œæ‰€ä»¥æ­¤å¤„ä¿ç•™ä¸€ä¸ªç©ºæ ¼
      const average = +(total / assign).toFixed(fixed);
      const rest = +(total - average * (assign - 1)).toFixed(fixed);
      // ğŸ‘‡å’ŒğŸ‘†æ˜¯ä¸¤ç±»ï¼Œæ‰€ä»¥æ­¤å¤„ä¿ç•™ä¸€ä¸ªç©ºæ ¼
      return {
          average,
          rest
      };
  }
  
  function getValueByAccuracy(value, accuracy = 1000) {
      return Math.ceil(+value * accuracy) / accuracy;
  }
  
  const getUpdatedParams = (type, list = []) => {
      /**
       * å…ˆé€šè¿‡å°±æ—§çš„åˆ†é…æ–¹å¼åˆ¤æ–­æ—¶å€™ä¿®æ”¹æ•°æ®ï¼ŒåŒ…æ‹¬ average + reset çš„æ ¡éªŒï¼Œä»¥åŠ æ€»å’Œæ˜¯å¦ä¸º ASSIGN_TOTAL
       */
      const listLength = list.length;
  
      // æ—§çš„åˆ†é…æ–¹å¼
      const {
          average,
          rest
      } = dynamicAssign(listLength, {
          total: ASSIGN_TOTAL
      });
  
      // odd åˆ†é…æ˜¯æœ‰å·®å¼‚çš„ e.g. [33.3, 33.3, 33.4]
      const ratioType = [average, rest];
  
      // å½“å‰åˆ†é…çš„å€¼
      const ratioList = list.map(
          item => getValueByAccuracy(+(item.ratio || 0))
      );
  		// ğŸ‘‡å’ŒğŸ‘†æ˜¯ä¸¤ç±»ï¼Œæ‰€ä»¥æ­¤å¤„ä¿ç•™ä¸€ä¸ªç©ºæ ¼
      const curFullRatio = ratioList.reduce((cur, next) => cur + next, 0);
      const isFullRatio = curFullRatio !== ASSIGN_TOTAL;
  		// ğŸ‘‡å’ŒğŸ‘†æ˜¯ä¸¤ç±»ï¼Œæ‰€ä»¥æ­¤å¤„ä¿ç•™ä¸€ä¸ªç©ºæ ¼
      const hasUpdated = ratioList
          .some(ratio => !ratioType.includes(ratio)) ||
          isFullRatio;
  
      if (hasUpdated) {
          return {
              hasUpdated
          };
      }
  
      const newListLength = listLen + (type === 'delete' ? -1 : 1);
      const {
          average: newAverage,
          rest: newRest
      } = dynamicAssign(newListLength, {
          total: ASSIGN_TOTAL
      });
  
      return {
          hasUpdated,
          average: newAverage,
          rest: newRest,
          isEven: !!(newKrLength % 2),
      };
  }
  ```

#### æ³¨é‡Š

å¤šè¡Œæ³¨é‡Š `/** ... */`

å•è¡Œæ³¨é‡Š `//`

æ›´å¤šå¯ä»¥è½¬æˆ‘å¦ä¸€ç¯‡æ–‡ç«  [ä¸€ç›®äº†ç„¶çš„ä»£ç æ³¨é‡Šå’ŒæŠ€å·§](knowledge-map/code-annotation.md)

#### ç¼©è¿›

`eslint: indent`

##### æ°´å¹³

ä¸€èˆ¬æ˜¯ **2 æˆ– 4 ä¸ªç©ºæ ¼**ï¼Œæˆ–è€… **Tabåˆ¶è¡¨ç¬¦**ã€‚è¿™ä¸ªå…¶å®éµå¾ªæ¯ä¸ªå›¢é˜Ÿæˆ–è€…å…¬å¸çš„è§„èŒƒå³å¯ï¼Œä½†æ˜¯ï¼Œæˆ‘ä¸ªäººå–œæ¬¢ **2ä¸ªç©ºæ ¼**ï¼Œå› ä¸ºè¿™æ ·é˜…è¯»ä»£ç å¯ä»¥æ›´èˆ’æœå†™ã€‚

```js
// 2
function getName(profile) {
  return profile?.name;
}

// 4
function getName(profile) {
    return profile?.name;
}
```

##### å‚ç›´

#### ä»£ç çš„å¸ƒå±€

åœ¨ä»£ç æ¥çœ‹ï¼Œæ‰€æœ‰çš„ä»£ç éƒ½æ˜¯ä»¥ **å—ä»£ç ** å’Œ **è¡Œä»£ç ** ç»„æˆã€‚

##### å—ä»£ç 

æ¯ä¸ªå—ä»£ç åé¢ä¿ç•™ä¸€ä¸ªç©ºè¡Œã€‚

```js
const info = {
  name: 'Rain120',
  gender: 'male',
  job: 'fe',
  workTime: 3,
  age: 25
};
// ---> here æ–°å¢ä¸€ä¸ªç©ºè¡Œ
const github = 'https://github.com/rain120';

```

##### è¡Œä»£ç 

ä¸€è¡Œé™åˆ¶åœ¨ `80-120` ä»¥å†…ï¼Œé“¾å¼è°ƒç”¨ï¼Œå°½é‡ä»¥è¿æ¥å‡½æ•°æ¢è¡Œã€‚

```js
// end
const info = Object.keys(info).map(k => ({ label: k, value:  info[k]})).filter(item => ['name', 'age', 'gender'].includes(item));

// good
const info = Object.keys(info)
		.map(k => ({ label: k, value:  info[k]}))
		.filter(item => ['name', 'age', 'gender'].includes(item));
```

#### ä¸ªäººå»ºè®®

##### æ˜¯å¦è‡ªåŠ¨æ ¼å¼åŒ–

ç›®å‰ï¼Œå¤§éƒ¨åˆ†å…¬å¸å’Œä¸ªäººå¼€å‘çš„é¡¹ç›®ï¼Œéƒ½ä¼šä½¿ç”¨ `eslint` è¿›è¡Œä»£ç (è‡ªåŠ¨ä¿å­˜æ ¼å¼åŒ–ï¼Œ`precommit` è‡ªåŠ¨`eslint --fix` æ£€æŸ¥ï¼Œä½†æ˜¯ï¼Œä»ä¸ªäººçš„è§’åº¦æ¥çœ‹ï¼Œåˆå­¦è€…ï¼Œä¸å»ºè®®è‡ªåŠ¨åŒ–å¤„ç†ï¼Œè€Œé€‚åˆæ‰‹åŠ¨æ•²ä»£ç ï¼Œå…»æˆä¹ æƒ¯ï¼Œåªä¿ç•™ `precommit fix` çš„æ“ä½œï¼›å¯¹äºï¼Œæœ‰ç»éªŒçš„åŒå­¦ï¼Œæˆ‘è§‰å¾—å¯ä»¥ï¼Œå¼€å¯è¿™äº›ï¼Œç”¨æ¥èŠ‚çœå¼€å‘æ—¶é—´ã€‚

#### å‚è€ƒèµ„æ–™

[Wiki - Programming style](https://en.wikipedia.org/wiki/Programming_style)

[Statement_(computer_science)](https://en.wikipedia.org/wiki/Statement_(computer_science))

[Google JavaScript Style Guide](https://google.github.io/styleguide/jsguide.html)

[Airbnb JavaScript Style Guide](https://github.com/airbnb/javascript)

