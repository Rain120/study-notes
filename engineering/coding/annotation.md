# ä»£ç æ³¨é‡Š

## ä»€ä¹ˆæ˜¯æ³¨é‡Š

> åœ¨[è®¡ç®—æœºè¯­è¨€](https://zh.wikipedia.org/wiki/è®¡ç®—æœºè¯­è¨€)ä¸­ï¼Œ**æ³¨é‡Š**æ˜¯[è®¡ç®—æœºè¯­è¨€](https://zh.wikipedia.org/wiki/è®¡ç®—æœºè¯­è¨€)çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œç”¨äºåœ¨[æºä»£ç ](https://zh.wikipedia.org/wiki/æºä»£ç )ä¸­è§£é‡Šä»£ç çš„åŠŸç”¨ï¼Œå¯ä»¥å¢å¼ºç¨‹åºçš„å¯è¯»æ€§ï¼Œå¯ç»´æŠ¤æ€§ï¼Œæˆ–è€…ç”¨äºåœ¨æºä»£ç ä¸­å¤„ç†ä¸éœ€è¿è¡Œçš„ä»£ç æ®µï¼Œæ¥è°ƒè¯•ç¨‹åºçš„åŠŸèƒ½æ‰§è¡Œã€‚
>
> æ³¨é‡Šåœ¨éšæºä»£ç è¿›å…¥[é¢„å¤„ç†å™¨](https://zh.wikipedia.org/wiki/é¢„å¤„ç†å™¨)æˆ–[ç¼–è¯‘å™¨](https://zh.wikipedia.org/wiki/ç¼–è¯‘å™¨)å¤„ç†åä¼šè¢«ç§»é™¤ï¼Œä¸ä¼šåœ¨[ç›®æ ‡ä»£ç ](https://zh.wikipedia.org/wiki/ç›®æ ‡ä»£ç )ä¸­ä¿ç•™å…¶ç›¸å…³ä¿¡æ¯ã€‚

## å†™ä»£ç åˆ°åº•è¦ä¸è¦å†™æ³¨é‡Š

> Clean code should read like well-written prose. â€” Robert C. Martin(ç½—ä¼¯ç‰¹Â·å¡è¥¿å°”Â·é©¬ä¸)
>

è‘—åè¯—äºº**é›·æŸ**ä¹Ÿè¯´

![good-coder-lei.png](./images/good-coder-lei.png)

é‚£ä¹ˆåƒè¯—ä¸€æ ·ä¼˜é›…çš„ä»£ç ï¼Œè¦ä¸è¦å†™ **æ ‡æ³¨** `or` **æ³¨é‡Š**å‘¢ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿ

ä¹Ÿè®¸ä½ ä¼šè¯´

- **ä»£ç å³æ³¨é‡Š** ( æˆ‘ ğŸ”ª å‘¢ï¼Œè®©æˆ‘æ‰‹åˆƒäº†ä½ è¿™è´§ )
- **æ³¨é‡Šå¾ˆé‡è¦ï¼Œæ¯ä¸€ä¸ªåœ°æ–¹éƒ½éœ€è¦ç•™æ³¨é‡Š** ( emm, çœ‹æ¥å¾ˆé—²ï¼Œé—²å‡ºç—…æ¥äº†ï¼Œæ¥ï¼ŒæŠŠè¿™å‡ ä¸ªéœ€æ±‚å®ç°äº† ğŸ’»   )

è¿™äº›æƒ³æ³•å¤šåŠæ˜¯å·æ‡’çš„æ€è·¯ï¼Œä½ è¿˜åˆ«æƒ³äº†ï¼Œ**Now**ï¼Œæ˜¯æ—¶å€™å±•ç°æˆ‘çœŸæ­£çš„æŠ€æœ¯äº†ï¼ŒğŸ“½ğŸ“½ğŸ“½

æˆ‘è§‰å¾—æ³¨é‡Šæ˜¯**å¿…é¡»è¦**çš„, ä¹Ÿæ˜¯**ä¸éœ€è¦**çš„ã€‚

å¾ˆå¤šå¼€å‘è€…ï¼Œç”±äºéœ€æ±‚æ›´æ–°è¿­ä»£å¤ªå¿« `or` ä¸ªäººä¹ æƒ¯ç­‰ä¸€ç³»åˆ—çš„åŸå› ï¼Œ**æ‰‹æ’¸åƒä¸‡è¡Œï¼Œéƒ½ä¸æ›¾ç•™ä¸‹ä¸€è¨€åŠè¯­çš„æ³¨é‡Š**ï¼Œ**Maybe ä½ çš„ä»£ç å’Œé›·è€æ¿çš„è¯—ä¸€æ ·ä¼˜é›…å§**ï¼Œ`but` ä½ èƒ½ç¡®ä¿å¾ˆé•¿ä¸€æ®µæ—¶é—´åä½ è¿˜èƒ½çœ‹å¾—æ‡‚å—ï¼Ÿä½ èƒ½ä¿è¯æ¥ä½ ä»£ç çš„äººèƒ½çœ‹å¾—æ‡‚ä½ çš„ä»£ç å˜›ï¼Ÿä½ èƒ½ï¼Œä½ èƒ½ï¼Œä½ èƒ½ï¼ŒğŸ™…â€â™€ï¸ä¸ä¸ä¸ï¼Œä½ ä¸è¡Œã€‚æ‰€ä»¥å¿…é¡»è¦æ³¨é‡Šï¼Œé‚£ä¸ºä»€ä¹ˆåˆè¯´ä¸éœ€è¦æ³¨é‡Šå‘¢ï¼Ÿ

æ³¨é‡Šå°±æ˜¯å¯¹ä»£ç çš„è§£é‡Šå’Œè¯´æ˜ã€‚ç”¨äº**ä»£ç å†…å®¹çš„æ€»ç»“**<sup>â‘ </sup>ã€**è¡¨è¾¾å¼€å‘è€…çš„æ„å›¾**<sup>â‘¡</sup>ï¼Œ ä¸ºäº†è®©åˆ«äººå’Œè‡ªå·±å¾ˆå®¹æ˜“çœ‹æ‡‚ï¼Œä¸€çœ‹å°±çŸ¥é“è¿™æ®µä»£ç æ˜¯åšä»€ä¹ˆç”¨çš„ã€‚

**Note:**

**â‘  ä»£ç ä¸­çš„æ€»ç»“**

  ç®€åŒ–ä»£ç ä¸ºä¸€å¥æˆ–ä¸¤å¥è¯ï¼Œè¿™ç§æ³¨é‡Šæ¯”é‡å¤ä»£ç æ›´æœ‰ä»·å€¼ï¼Œèƒ½å¸®åŠ©äººå¿«é€Ÿç†è§£ä»£ç 

**â‘¡ ä»£ç æ„å›¾çš„æè¿°**

  è§£é‡Šä»£ç çš„ç›®çš„ã€‚æ„å›¾æ³¨é‡Šåœ¨é—®é¢˜ä¸€çº§ä¸Šï¼Œè€Œä¸æ˜¯åœ¨ç­”æ¡ˆä¸€çº§ï¼Œæ˜¯ä¸€å¥åˆ©ç”¨ç­”æ¡ˆçš„æ€»ç»“æè¿°ã€‚ã€ç†è§£æœ€åˆçš„ç¼–ç¨‹æ„å›¾æ˜¯æœ€éš¾çš„é—®é¢˜ã€

é‚£å°±è¦çŸ¥é“ä»€ä¹ˆæ³¨é‡Šéœ€è¦æ³¨é‡Šï¼Œä»€ä¹ˆä¸éœ€è¦ï¼Ÿä»€ä¹ˆæ‰æ˜¯å¥½çš„æ³¨é‡Šï¼Œä»€ä¹ˆæ˜¯åçš„æ³¨é‡Šï¼Ÿ

## æ­£ç¡®æ³¨é‡Š VS é”™è¯¯æ³¨é‡Š <sup>å‚è€ƒ ä»£ç æ•´æ´ä¹‹é“</sup>

æ­£ç¡®çš„æ³¨é‡Šä¸€èˆ¬åŒ…æ‹¬**åºè¨€æ€§æ³¨é‡Š**å’Œ**åŠŸèƒ½æ€§æ³¨é‡Š**ã€‚

-   åºè¨€æ€§æ³¨é‡Šçš„ä¸»è¦å†…å®¹åŒ…æ‹¬ **æ¨¡å—çš„æ¥å£ã€æ•°æ®çš„æè¿°å’Œæ¨¡å—çš„åŠŸèƒ½**ã€‚

-   æ¨¡å—çš„åŠŸèƒ½æ€§æ³¨é‡Šçš„ä¸»è¦å†…å®¹åŒ…æ‹¬ **ç¨‹åºæ®µçš„åŠŸèƒ½ã€è¯­å¥çš„åŠŸèƒ½å’Œæ•°æ®çš„çŠ¶æ€**ã€‚

å½“ç„¶äº†ï¼Œä»£ç æ³¨é‡Šä¹Ÿå¯èƒ½å­˜åœ¨è¯¯å¯¼ã€ä¸é€‚ç”¨æˆ–è€…æä¾›é”™è¯¯ä¿¡æ¯ï¼Œé‚£ä¹ˆåçš„æ³¨é‡Šéƒ½æœ‰å“ªäº›ç‰¹æ€§ï¼Ÿ

-   **å¤šä½™çš„æ³¨é‡Š**

  ç®€å•æ˜äº†çš„å‡½æ•°ï¼Œå…¶å‡½æ•°æ³¨é‡Šè¯´æ˜çº¯å±å¤šä½™ï¼Œè¯»æ³¨é‡Šçš„æ—¶é—´å¯èƒ½å¤šä½™è¯»å‡½æ•°ä»£ç çš„æ—¶é—´

-   **è¯¯å¯¼æ€§æ³¨é‡Š**

  æ³¨é‡Šä¸å¤Ÿç²¾ç¡®ï¼Œå­˜åœ¨ä¸å®é™…è¿è¡Œä¸ç›¸ç¬¦çš„æƒ…å†µï¼Œè¯¯å¯¼ä½¿ç”¨è€…è¿›è¡Œé”™è¯¯çš„å¤„ç†

-   **æ—¥å¿—æ€§æ³¨é‡Š**

  åœ¨æ¯ä¸ªæ¨¡å—å¼€å§‹æ·»åŠ æ¯ä¸€æ¬¡ä¿®æ”¹çš„æ³¨é‡Šæ€§æ—¥å¿—å·²ç»æ²¡æœ‰å¿…è¦ï¼Œç°åœ¨å¾ˆå¤šä»£ç ç»´æŠ¤å·¥å…·æä¾›æ›´å¥½çš„ä¿®æ”¹è®°å½•

-   **åºŸè¯æ³¨é‡Š**

  è§åçŸ¥æ„çš„å°±ä¸è¦åºŸè¯äº†ï¼Œ`Eg:`

  ```js
  // è·å–åå­— ------> åºŸè¯
  const getUserName = profile.name;
  ```

-   **å¾ªè§„å¼æ³¨é‡Š**

  æ¯ä¸ªå‡½æ•°æˆ–è€…æ¯ä¸ªå˜é‡éƒ½æœ‰æ ‡å‡†çš„æ³¨é‡Šå®Œå…¨æ²¡æœ‰å¿…è¦ï¼Œé™¤éæ˜¯ç¼–å†™å…¬å…± API

## æ³¨é‡Šçš„ç§ç±» <sup>å‚è€ƒä»£ç å¤§å…¨</sup>

æ³¨é‡Šå¯ä»¥åˆ†æˆäº”ç±»

- ä»£ç çš„é‡å¤

  é‡å¤çš„æ³¨é‡Šï¼Œç”¨ä¸åŒçš„è¯é‡ç”³äº†ä»£ç çš„å†…å®¹ã€‚å®ƒæ²¡æœ‰ç»™è¯»è€…æä¾›ä»£ç çš„é™„åŠ ä¿¡æ¯ã€‚

- ä»£ç çš„è§£é‡Š

  è§£é‡Šæ€§æ³¨é‡Šï¼Œå…¸å‹åœ°ç”¨äºè§£é‡Šå¤æ‚çš„ï¼Œæœ‰æ•ˆçš„å’Œçµæ•çš„ä»£ç æ®µã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä»–ä»¬æ˜¯æœ‰ç”¨çš„ï¼Œä½†å¸¸å¸¸æ˜¯ç”±äºä»£ç æ˜¯æ˜“æ··æ·†çš„ã€‚å‡å¦‚ä»£ç å¤æ‚åˆ°éœ€è¦è§£é‡Šï¼Œé‚£ä¹ˆæ”¹è¿›ä»£ç æ€»æ¯”å¢åŠ æ³¨é‡Šæ›´ å¥½äº›ã€‚ä½¿ä»£ç æœ¬èº«æ¸…æ™°ï¼Œç„¶åä½¿ç”¨æ€»ç»“æˆ–æ³¨é‡Šã€‚

- ä»£ç ä¸­çš„æ ‡è®°

  æ ‡è®°æ³¨é‡Šå¹¶éæ˜¯æ•…æ„ç•™åœ¨ä»£ç ä¸­çš„æ³¨é‡Šã€‚å®ƒæ˜¯ç»™å¼€å‘è€…çš„è®°å½•ï¼Œè¡¨ç¤ºå·¥ä½œè¿˜æœªåšã€‚ä¸€äº›å¼€å‘è€…çš„æ ‡è®°æ³¨é‡Šä¸ºè¯­æ³•é”™è¯¯çš„æ ‡è®°ï¼ˆä¾‹å¦‚**// TODO**ï¼‰ï¼Œå› è€Œç¼–è¯‘ç¨‹åºæ ‡è®°å®ƒå¹¶æé†’ä»–ä»¬è¦ åšæ›´å¤šçš„å·¥ä½œã€‚å…¶å®ƒå¼€å‘è€…æŠŠä¸€å¥—ç‰¹æ®Šå­—ç¬¦æ”¾äººæ³¨é‡Šä¸­ï¼Œå› è€Œä»–ä»¬å¯ä»¥å‘ç°å®ƒä»¬ï¼Œä½†ç¼–è¯‘ç¨‹åº ä¸èƒ½è¯†åˆ«å®ƒä»¬ã€‚

- ä»£ç çš„æ€»ç»“

  æ€»ç»“ä»£ç çš„æ³¨é‡Šåšæ³•æ˜¯ï¼›å®ƒç®€åŒ–ä¸€äº›ä»£ç è¡Œæˆä¸€æˆ–ä¸¤å¥è¯ã€‚è¿™æ ·çš„æ³¨é‡Šæ¯”èµ·ä»…é‡å¤ä»£ç è€Œ ä½¿è¯»è€…æ¯”è¯»ä»£ç æ›´å¿«çš„é‚£ç§æ³¨é‡Šæ›´æœ‰ä»·å€¼äº†ã€‚æ€»ç»“æ³¨é‡Šæ˜¯ç›¸å½“æœ‰ç”¨çš„ï¼Œç‰¹åˆ«æ˜¯å½“å…¶å®ƒäººä½†ä¸æ˜¯ ä»£ç çš„ç¼–è€…è¯•å›¾ä¿®æ”¹ä»£ç æ—¶ã€‚

- ä»£ç æ„å›¾çš„æè¿°

  æ„å›¾è¿™ä¸€å±‚ä¸Šçš„æ³¨é‡Šï¼Œè§£é‡Šäº†ä»£ç çš„ç›®çš„ã€‚æ„å›¾æ³¨é‡Šåœ¨é—®é¢˜ä¸€çº§ä¸Šï¼Œè€Œä¸æ˜¯åœ¨ç­”æ¡ˆä¸€çº§æ“ä½œã€‚

## æ³¨é‡Šçš„åˆ†ç±»

>  PS: æˆ‘è¿˜æŸ¥äº†ä¸‹è¿™ä¸ª ğŸ‘‰ğŸ‘‰ğŸ‘‰ â€œåˆ†ç±»â€æ˜¯æŒ‰æŸç§è§„åˆ™åˆ’åˆ†ï¼Œè€Œâ€œç§ç±»â€æ˜¯åˆ’åˆ†åçš„ä¸€ä¸ªç»“æœã€‚

### è¡Œæ³¨é‡Š

åœ¨ç¬¦å·åé‚£ä¸€è¡Œä¸ä¼šè¢«ç¼–è¯‘(æ˜¾ç¤º), è¡Œä»£ç å¯ä»¥å†™åœ¨è¯­å¥ä¸Šé¢ï¼Œä¹Ÿå¯ä»¥å†™åœ¨è¯­å¥åé¢ï¼Œçœ‹ä¸ªäººä¹ æƒ¯ï¼Œæˆ‘ä¸ªäººä¹ æƒ¯åœ¨ä¸Šé¢ğŸ‘†ï¼Œå› ä¸ºå¥½çœ‹å•Šã€‚ğŸ˜›ğŸ˜›ğŸ˜›

### å—æ³¨é‡Š

è¢«å—æ³¨é‡Šç¬¦å·ä¸­é—´çš„éƒ¨åˆ†ä¸ä¼šè¢«ç¼–è¯‘ã€‚

## å¦‚ä½•å†™æ³¨é‡Š

### æ³¨é‡Šé£æ ¼

`//` æˆ– `/* */` éƒ½å¯ä»¥; ä½† `//` **æ›´å¸¸ç”¨**ã€‚ è¦åœ¨å¦‚ä½•æ³¨é‡ŠåŠæ³¨é‡Šé£æ ¼ä¸Šç¡®ä¿ç»Ÿä¸€ã€‚

### æ–‡ä»¶æ³¨é‡Š

æ¯ä¸ªæ–‡ä»¶éƒ½åº”è¯¥åŒ…å«è®¸å¯è¯å¼•ç”¨. ä¸ºé¡¹ç›®é€‰æ‹©åˆé€‚çš„è®¸å¯è¯ç‰ˆæœ¬ã€‚(æ¯”å¦‚, Apache 2.0, BSD, LGPL, GPL)

å¦‚æœä½ å¯¹åŸå§‹ä½œè€…çš„æ–‡ä»¶åšäº†é‡å¤§ä¿®æ”¹, è¯·è€ƒè™‘åˆ é™¤åŸä½œè€…ä¿¡æ¯ã€‚

`Eg: mobx`

```js
/**
 * (c) Michel Weststrate 2015 - 2020
 * MIT Licensed
 *
 * Welcome to the mobx sources! To get an global overview of how MobX internally works,
 * this is a good place to start:
 * https://medium.com/@mweststrate/becoming-fully-reactive-an-in-depth-explanation-of-mobservable-55995262a254#.xvbh6qd74
 *
 * Source folders:
 * ===============
 *
 * - api/     Most of the public static methods exposed by the module can be found here.
 * - core/    Implementation of the MobX algorithm; atoms, derivations, reactions, dependency trees, optimizations. Cool stuff can be found here.
 * - types/   All the magic that is need to have observable objects, arrays and values is in this folder. Including the modifiers like `asFlat`.
 * - utils/   Utility stuff.
 *
 */
```

æˆ–è€…è¿™æ ·

```js
/*
 * @Description è¿™æ˜¯ä¸€ä¸ªæ–‡ä»¶æ³¨é‡Š, æè¿°è¿™ä¸ªæ–‡ä»¶æ˜¯å¹²å˜›çš„
 * @Author: Rainy
 * @Date: 2020-09-20 22:04:20
 * @LastEditors: Rainy
 * @LastEditTime: 2020-09-30 16:17:20
 */
```

### ä»£ç æ³¨é‡Š

ç”±äºæœ¬äººæ˜¯`FE er`, æ‰€ä»¥æœ¬äººåªä»‹ç»å‰ç«¯ç›¸å…³çš„æ³¨é‡Šã€‚

**HTML**

```html
<div>
  <!-- è¿™æ˜¯ HTML çš„æ³¨é‡Š -->
</div>
```

**CSS**

```css
.root {
  /* è¿™æ˜¯ CSS çš„æ³¨é‡Š */
}
```

**SCSS**

```scss
.root {
  /* è¿™æ˜¯ SCSS çš„æ³¨é‡Š */
  // è¿™ä¹Ÿæ˜¯ SCSS çš„æ³¨é‡Š
}
```

**LESS**

```less
.root {
  /* è¿™æ˜¯ LESS çš„æ³¨é‡Š */
  // è¿™ä¹Ÿæ˜¯ LESS çš„æ³¨é‡Š
}
```

**JS**

å†…å®¹æ³¨é‡Š

```JS
const profile = {
  /* è¿™æ˜¯ JS çš„æ³¨é‡Šï¼Œæˆ‘å–œæ¬¢è¿™ç§æ–¹å¼ï¼Œå› ä¸ºå½“ğŸ‘‡ä»£ç å¤ªé•¿äº†ï¼Œåœ¨åé¢æ³¨é‡Šå°±åœ¨å½“å‰å±å¹•å†…çœ‹ä¸åˆ°äº† */
  name: 'Rain120', // è¿™ä¹Ÿæ˜¯ JS çš„æ³¨é‡Š
  github: 'https://github.com/rain120'
}
```

å‡½æ•°æ³¨é‡Š

```js
/**
 * @description æ‰§è¡Œ Action
 * @param  {string} actionName
 * @param  {boolean} canRunAsDerivation
 * @param  {Function} fn
 * @param  {any} scope?
 * @param  {IArguments} argv?
 */
export function executeAction(
    actionName: string,
    canRunAsDerivation: boolean,
    fn: Function,
    scope?: any,
    argv?: IArguments
) {
    try {
        return fn.apply(scope, argv);
    } catch (error) {
        throw error;
    } finally {
    }
}
```

å¸¸é‡æ³¨é‡Š

```ts
// æ¨å¯¼çŠ¶æ€
export enum IDerivationState {
  // åœ¨è¿è¡Œä¹‹å‰æˆ–(åœ¨å¤–éƒ¨æ‰¹å¤„ç†ä¸­ä¸”æœªè§‚å¯Ÿåˆ°)ä¹‹å‰, æ´¾ç”Ÿæœªä¿å­˜æœ‰å…³ ä¾èµ–é¡¹ æ ‘çš„ä»»ä½•æ•°æ®
  NOT_TRACKING = -1,

  // è‡ªä»ä¸Šæ¬¡è®¡ç®—ä¸ä¼šé‡æ–°è®¡ç®—å¯¼æ•°ä»¥æ¥, æµ…å±‚ä¾èµ–å…³ç³»æ²¡æœ‰å˜åŒ–, è¿™å°±æ˜¯ä½¿mobxå¿«é€Ÿè¿è¡Œçš„åŸå› 
  UP_TO_DATE = 0,

  // ä¸€äº›æ·±å±‚ä¾èµ–å…³ç³»å·²æ›´æ”¹, ä½†ä¸çŸ¥é“æ˜¯å¦æµ…å±‚ä¾èµ–å…³ç³»å·²æ›´æ”¹
  // å°†éœ€è¦é¦–å…ˆæ£€æŸ¥ UP_TO_DATE æˆ– POSSIBLY_STALE å½“å‰æ˜¯å¦åªæœ‰ ComputedValue
  // å°†ä¼ æ’­å…·æœ‰æ­¤çŠ¶æ€çš„ POSSIBLY_STALE
  // ä¸å¿…åœ¨æ¯æ¬¡ä¾èµ–å…³ç³»æ›´æ”¹æ—¶éƒ½é‡æ–°è®¡ç®—
  POSSIBLY_STALE = 1,

  // è‡ªä¸Šæ¬¡è®¡ç®—ä»¥æ¥, æµ…å±‚ä¾èµ–æ€§å·²å‘ç”Ÿå˜åŒ–, å¹¶ä¸”ä¸‹ä¸€æ¬¡éœ€è¦æ¨å¯¼æ—¶, éœ€è¦é‡æ–°æ¨å¯¼ã€‚
  STALE = 2
}
```

**é“¾æ¥æ³¨é‡Š**

è§£é‡Šæ€§`(more info etc...)`é“¾æ¥æ³¨é‡Š

```js
// LINK_TO: https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor
// è¿”å›æŒ‡å®šå¯¹è±¡ä¸Šä¸€ä¸ªè‡ªæœ‰å±æ€§å¯¹åº”çš„å±æ€§æè¿°ç¬¦ã€‚
// (è‡ªæœ‰å±æ€§æŒ‡çš„æ˜¯ç›´æ¥èµ‹äºˆè¯¥å¯¹è±¡çš„å±æ€§ï¼Œä¸éœ€è¦ä»åŸå‹é“¾ä¸Šè¿›è¡ŒæŸ¥æ‰¾çš„å±æ€§)
export const getDescriptor = Object.getOwnPropertyDescriptor;
```

`Bug Fix` é“¾æ¥æ³¨é‡Š

```js
const path = require('path')

// get drive on windows
function getRootPath (p) {
  p = path.normalize(path.resolve(p)).split(path.sep)
  if (p.length > 0) return p[0]
  return null
}

// http://stackoverflow.com/a/62888/10333 contains more accurate
// TODO: expand to include the rest
const INVALID_PATH_CHARS = /[<>:"|?*]/

function invalidWin32Path (p) {
  const rp = getRootPath(p)
  p = p.replace(rp, '')
  return INVALID_PATH_CHARS.test(p)
}
```

`reference`å¼•ç”¨é“¾æ¥æ³¨é‡Š

```js
// LINK_TO: https://github.com/immerjs/immer/blob/9257084c2b3c04fc9727e4c701d672483a7767b7/src/utils/common.ts#L65
export const getOwnPropertyDescriptors =
  Object.getOwnPropertyDescriptors ||
  function getOwnPropertyDescriptors(target: any): Object {
    // Polyfill needed for Hermes and IE, see https://github.com/facebook/hermes/issues/274
    const result: any = {};
    ownKeys(target).forEach(key => {
      result[key] = getDescriptor(target, key);
    });

    return result;
  };
```

**Shell**

å¤´éƒ¨æ³¨é‡Š

```sh
##
# @Author: Rainy [https://github.com/rain120]
# @Date: 2020-10-10 10:10:10
# @LastEditors: Rainy
# @LastEditTime: 2020-11-11 11:11:11
##
```

ä»£ç æ³¨é‡Š

```sh
# è¿™æ˜¯ shell çš„æ³¨é‡Š
echo "I'm so handsome!"
```

### ç‰¹æ®Šæ ‡è®°æ³¨é‡Š

Note: å¿½ç•¥å¤§å°å†™ï¼Œå¯æ·»åŠ ç‰¹æ®Šç¬¦å·ï¼Œå¦‚ `@`

- **// TODO:** æœ‰åŠŸèƒ½ä»£ç å¾…ç¼–å†™ï¼Œå¾…å®ç°çš„åŠŸèƒ½åœ¨è¯´æ˜ä¸­ä¼šç®€ç•¥è¯´æ˜

- **// HOTFIX:** ä»£ç éœ€è¦ä¿®æ­£ï¼Œç”šè‡³ä»£ç æ˜¯é”™è¯¯çš„ï¼Œä¸èƒ½å·¥ä½œï¼Œéœ€è¦ä¿®å¤ï¼Œå¦‚ä½•ä¿®æ­£ä¼šåœ¨è¯´æ˜ä¸­ç®€ç•¥è¯´æ˜

- **// BUGFIX:** `BUGFIX` ç›¸å…³æè¿°

- **// N.B.** ç‰¹åˆ«è¯´æ˜`(Note Bell)`

- **// LINK_TO:** ä¸æ­¤é—®é¢˜ç›¸å…³è§£å†³æ–¹æ¡ˆ `or` `issue`

- **// HACK:** ç¼–å†™å¾—ä¸å¥½æˆ–æ ¼å¼é”™è¯¯ï¼Œéœ€è¦æ ¹æ®è‡ªå·±çš„éœ€æ±‚å»è°ƒæ•´ç¨‹åºä»£ç 

- **// NOTE:** è¯´æ˜ä»£ç å¦‚ä½•å·¥ä½œ

- **// INFO:** ç›¸å…³ä¿¡æ¯æè¿°

- **// TAG:** `Tag` ç›¸å…³æè¿°


![label-annotation.png](./images/label-annotation.png)

### æ³¨é‡Šå¸¸ç”¨æ ‡ç­¾ <sup>å‚è€ƒ JS Doc</sup>

**@author Rain120 [1085131904@qq.com]**

ä»£ç çš„ä½œè€…, åœ¨å§“ååé¢ç”¨å°–æ‹¬å·åŠ ä¸Šé‚®ç®±ä¼šè¢«è‡ªåŠ¨è½¬æˆ `mailto:` çš„é“¾æ¥

**@type {typeName}**

`*`è¡¨ç¤ºä»»ä½•ç±»å‹, `?`è¡¨ç¤ºå¯ä»¥ä¸º `null`, `!`è¡¨ç¤ºä¸èƒ½ä¸º `null`

æ•°ç»„ç”¨`[]`è¡¨ç¤º, ç±»å‹æœ‰å¤šç§æƒ…å†µéœ€ç”¨`|`è¿›è¡Œåˆ†éš”ï¼Œå¹¶åŠ ä¸Š`()`, å¯ä»¥ä½¿ç”¨ `@callback` æˆ– `@typedef` å®šä¹‰çš„ç±»å‹

**@description**

å¯¹æŸä¸ªéƒ¨åˆ†çš„è¯¦ç»†æè¿°å’Œè¯´æ˜

**@param**

éå¿…ä¼ å‚æ•°éœ€ç»™å‚æ•°ååŠ ä¸Š`[]`, å‚æ•°å¦‚æœ‰é»˜è®¤å€¼éœ€ç”¨`=`è¡¨ç¤º

å¦‚æœå‚æ•°æ˜¯`object`ï¼Œå¯ç»§ç»­ç”¨ `@param` å¯¹å…¶å±æ€§è¿›è¡Œè¯¦ç»†è¯´æ˜, è‹¥å¹²ä¸ªå‚æ•°ç”¨`...`è¡¨ç¤º

**@returns**
æè¿°ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼

![addjsdoc.png](./images/addjsdoc.png)

![jsdoc-annotation.gif](./images/jsdoc-annotation.gif)

äº†è§£æ›´å¤š ğŸ‘‰ğŸ‘‰ğŸ‘‰[Here JS Doc Guide](http://yuri4ever.github.io/jsdoc/)

è¯´åˆ°è¿™äº†ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ **é›·è€æ¿** å†™çš„è¯—ã€‚

![lei-code.jpg](./images/lei-code.jpg)

## VS Code æŠ€å·§

[addDocComments æ’ä»¶](https://marketplace.visualstudio.com/items?itemName=stevencl.addDocComments)

![addDocComments.gif](./images/addDocComments.gif)

![ts + addDocComments.gif](./images/ts+addDocComments.gif)

[koroFileheader](https://marketplace.visualstudio.com/items?itemName=OBKoro1.korofileheader)

### å¿«æ·é”®

**æ–‡ä»¶å¤´éƒ¨æ·»åŠ æ³¨é‡Š**

```
window: ctrl + alt + i
mac: ctrl + cmd + i
linux: ctrl + meta + i
```

![fileheader.gif](./images/fileheader.gif)

**åœ¨å…‰æ ‡å¤„æ·»åŠ å‡½æ•°æ³¨é‡Š**

```
window: ctrl + alt + t
mac: ctrl + cmd + t
linux: ctrl + meta + t
```

![fileheader-annotation.gif](./images/fileheader-annotation.gif)

```json
{
    "fileheader.customMade": {
        "Author": "Rainy",
        "Date": "Do not edit",
        "LastEditors": "Rainy",
        "LastEditTime": "Do not edit"
    },
    // æ–°å»ºæ–‡ä»¶è‡ªåŠ¨æ·»åŠ 
    "fileheader.configObj": {
        "autoAdd": false
    }
}
```

[æ’ä»¶: TODO Tree](https://marketplace.visualstudio.com/items?itemName=Gruntfuggly.todo-tree)

[TODO Tree Icon](https://primer.style/octicons/)

### TODO Tree é…ç½®

```json
{
    "todo-tree.tree.showScanModeButton": false,
    // TODO Tree Setting
    // "todo-tree.regex.regex": "((//|#|<!--|;|/\\*|^)\\s*($TAGS):|^\\s*- \\[ \\])",
    "todo-tree.general.tags": [
        "TODO:",
        "HOTFIX:",
        "BUGFIX",
        "DONE:",
        "NOTE:",
        "INFO:",
        "LINK_TO",
        "TAG",
        "N.B.",
        "HACK"
    ],
    "todo-tree.highlights.defaultHighlight": {
        "gutterIcon": true,
        "type": "tag"
        // tag - ä»…çªå‡ºæ˜¾ç¤ºæ ‡ç­¾
        // text - çªå‡ºæ˜¾ç¤ºæ ‡ç­¾ä»¥åŠæ ‡ç­¾åçš„æ‰€æœ‰æ–‡æœ¬
        // tag-and-comment - çªå‡ºæ˜¾ç¤ºæ³¨é‡Šå­—ç¬¦ï¼ˆæˆ–æ¯”èµ›å¼€å§‹ï¼‰å’Œæ ‡ç­¾
        // text-and-comment - çªå‡ºæ˜¾ç¤ºæ³¨é‡Šå­—ç¬¦ï¼ˆæˆ–åŒ¹é…çš„å¼€å§‹ï¼‰ï¼Œæ ‡ç­¾ä»¥åŠæ ‡ç­¾åçš„æ–‡å­—
        // line - çªå‡ºæ˜¾ç¤ºåŒ…å«æ ‡ç­¾çš„æ•´è¡Œ
        // whole-line - å°†åŒ…å«æ ‡ç­¾çš„æ•´è¡Œçªå‡ºæ˜¾ç¤ºåˆ°ç¼–è¾‘å™¨çš„æ•´ä¸ªå®½åº¦
    },
    // LINK_TO: https://primer.style/octicons/
    "todo-tree.highlights.customHighlight": {
        "TODO:": {
            "foreground": "#fff",
            "background": "#ffbd2a",
            "iconColour": "#ffbd2a"
        },
        "HOTFIX:": {
            "foreground": "#fff",
            "background": "#f06292",
            "icon": "flame",
            "iconColour": "#f06292"
        },
        "DONE": {
            "background": "#2BBE4E",
            "icon": "issue-closed",
            "rulerColour": "#2BBE4E",
            "iconColour": "#2BBE4E"
        },
        "INFO:": {
            "foreground": "#fff",
            "background": "#3f83f8",
            "icon": "info",
            "iconColour": "#3f83f8"
        },
        "LINK_TO:": {
            "foreground": "#fff",
            "background": "#3f33f8",
            "icon": "info",
            "iconColour": "#3f33f8"
        },
        "NOTE:": {
            "foreground": "#fff",
            "background": "#3f83f8",
            "icon": "note",
            "iconColour": "#3f83f8"
        },
        "TAG": {
            "foreground": "#fff",
            "background": "#03A9F4",
            "icon": "tag",
            "rulerColour": "#03A9F4",
            "iconColour": "#03A9F4",
            "rulerLane": "full"
        },
        "BUGFIX": {
            "foreground": "#fff",
            "background": "#ee3c2c",
            "icon": "bug",
            "rulerColour": "#ee3c2c",
            "iconColour": "#ee3c2c",
            "rulerLane": "full"
        },
        "N.B.": {
            "foreground": "#fff",
            "background": "#ffbd2a",
            "icon": "shield",
            "rulerColour": "#ffbd2a",
            "iconColour": "#ffbd2a",
            "rulerLane": "full"
        },
        "HACK": {
            "foreground": "#fff",
            "background": "#cb2431",
            "icon": "thumbsdown",
            "rulerColour": "#cb2431",
            "iconColour": "#cb2431",
            "rulerLane": "full"
        }
    }
}
```

äº†è§£æ›´å¤š `VS Code` æŠ€å·§ `or` `Tips` ğŸ‘‰ğŸ‘‰ğŸ‘‰  [Here](https://rain120.github.io/study-notes/tools/vscode/todo-tree)

## å‚è€ƒèµ„æ–™

[Google å¼€æºé¡¹ç›®é£æ ¼æŒ‡å— æ³¨é‡Š](https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/comments/)

[ç¼–å†™é«˜è´¨é‡å¯ç»´æŠ¤çš„ä»£ç ï¼šä¸€ç›®äº†ç„¶çš„æ³¨é‡Š](https://juejin.im/post/6877155538430328845)

[JS Doc å®˜æ–¹æ–‡æ¡£](https://jsdoc.app/index.html)

[ä»£ç æ•´æ´ä¹‹é“ - ç¬¬ 4 ç«  æ³¨é‡Š](http://gdut_yy.gitee.io/doc-cleancode/ch4.html)

[ä»£ç å¤§å…¨ 19.4 æœ‰æ•ˆæ³¨é‡Šçš„å…³é”®](https://github.com/Rain120/study-notes/blob/master/docs/knowledge-map/code-complete.pdf)

