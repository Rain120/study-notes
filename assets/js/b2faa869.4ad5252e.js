"use strict";(self.webpackChunkstudy_notes=self.webpackChunkstudy_notes||[]).push([[5270],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return d}});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=a.createContext({}),s=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):p(p({},n),e)),t},c=function(e){var n=s(e.components);return a.createElement(o.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=s(t),d=r,k=u["".concat(o,".").concat(d)]||u[d]||m[d]||i;return t?a.createElement(k,p(p({ref:n},c),{},{components:t})):a.createElement(k,p({ref:n},c))}));function d(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,p=new Array(i);p[0]=u;var l={};for(var o in n)hasOwnProperty.call(n,o)&&(l[o]=n[o]);l.originalType=e,l.mdxType="string"==typeof e?e:r,p[1]=l;for(var s=2;s<i;s++)p[s]=t[s];return a.createElement.apply(null,p)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},5789:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return o},metadata:function(){return s},toc:function(){return c},default:function(){return u}});var a=t(87462),r=t(63366),i=(t(67294),t(3905)),p=["components"],l={},o=void 0,s={unversionedId:"git-npm/npm-publish",id:"git-npm/npm-publish",isDocsHomePage:!1,title:"npm-publish",description:"1. \u6ce8\u518cnpm\u8d26\u53f7",source:"@site/engineering/git-npm/npm-publish.md",sourceDirName:"git-npm",slug:"/git-npm/npm-publish",permalink:"/study-notes/engineering/git-npm/npm-publish",tags:[],version:"current",lastUpdatedBy:"Rain120",lastUpdatedAt:1638187381,formattedLastUpdatedAt:"11/29/2021",frontMatter:{},sidebar:"sidebar",previous:{title:"npm-package-json",permalink:"/study-notes/engineering/git-npm/npm-package-json"},next:{title:"npm-scripts",permalink:"/study-notes/engineering/git-npm/npm-scripts"}},c=[{value:"1. \u6ce8\u518c<code>npm</code>\u8d26\u53f7",id:"1-\u6ce8\u518cnpm\u8d26\u53f7",children:[],level:4},{value:"2. \u65b0\u5efa\u4e00\u4e2a<code>repository</code>",id:"2-\u65b0\u5efa\u4e00\u4e2arepository",children:[],level:4},{value:"3. \u521b\u5efa\u9879\u76ee",id:"3-\u521b\u5efa\u9879\u76ee",children:[],level:4},{value:"4. \u53d1\u5e03<code>npm</code>",id:"4-\u53d1\u5e03npm",children:[],level:4},{value:"5. \u4f7f\u7528<code>vue3.x</code>\u8fdb\u884c\u7ec4\u4ef6\u5e93\u5f00\u53d1",id:"5-\u4f7f\u7528vue3x\u8fdb\u884c\u7ec4\u4ef6\u5e93\u5f00\u53d1",children:[],level:4},{value:"\u95ee\u9898",id:"\u95ee\u9898",children:[],level:4}],m={toc:c};function u(e){var n=e.components,l=(0,r.Z)(e,p);return(0,i.kt)("wrapper",(0,a.Z)({},m,l,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h4",{id:"1-\u6ce8\u518cnpm\u8d26\u53f7"},"1. \u6ce8\u518c",(0,i.kt)("inlineCode",{parentName:"h4"},"npm"),"\u8d26\u53f7"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/"},"npm\u6ce8\u518c\u5730\u5740")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"npm login\n")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"npm-login",src:t(33665).Z})),(0,i.kt)("h4",{id:"2-\u65b0\u5efa\u4e00\u4e2arepository"},"2. \u65b0\u5efa\u4e00\u4e2a",(0,i.kt)("inlineCode",{parentName:"h4"},"repository")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"new-repository",src:t(12930).Z})),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"npm init")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"cui-npm-init",src:t(99337).Z})),(0,i.kt)("h4",{id:"3-\u521b\u5efa\u9879\u76ee"},"3. \u521b\u5efa\u9879\u76ee"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"vue-create")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"vue-create",src:t(87602).Z})),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"remote github")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"cui-git-init",src:t(46073).Z})),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"push error")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"git-push-error",src:t(35424).Z})),(0,i.kt)("h4",{id:"4-\u53d1\u5e03npm"},"4. \u53d1\u5e03",(0,i.kt)("inlineCode",{parentName:"h4"},"npm")),(0,i.kt)("p",null,"\u67e5\u770b\u4f60\u7684\u5305\u540d\u662f\u5426\u5df2\u5b58\u5728"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"package-name-find",src:t(90642).Z})),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"npm publish")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"npm-publish",src:t(20551).Z})),(0,i.kt)("h4",{id:"5-\u4f7f\u7528vue3x\u8fdb\u884c\u7ec4\u4ef6\u5e93\u5f00\u53d1"},"5. \u4f7f\u7528",(0,i.kt)("inlineCode",{parentName:"h4"},"vue3.x"),"\u8fdb\u884c\u7ec4\u4ef6\u5e93\u5f00\u53d1"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"\u57fa\u7840\u6846\u67b6\u7684\u642d\u5efa(",(0,i.kt)("inlineCode",{parentName:"p"},"typescript"),"+",(0,i.kt)("inlineCode",{parentName:"p"},"Vue 3.x"),")"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u76ee\u5f55\u7ed3\u6784")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-shell"},' tree -L 3 -I "node_modules"\n')),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-shell"},".\n\u251c\u2500\u2500 LICENSE\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 babel.config.js\n\u251c\u2500\u2500 examples // demo\n\u2502\xa0\xa0 \u251c\u2500\u2500 App.vue\n\u2502\xa0\xa0 \u251c\u2500\u2500 assets\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 logo.png\n\u2502\xa0\xa0 \u251c\u2500\u2500 components\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 Alert.vue\n\u2502\xa0\xa0 \u251c\u2500\u2500 main.ts\n\u2502\xa0\xa0 \u2514\u2500\u2500 router.ts\n\u251c\u2500\u2500 jest.config.js\n\u251c\u2500\u2500 package-lock.json\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 packages // \u7ec4\u4ef6\u5e93\n\u2502\xa0\xa0 \u251c\u2500\u2500 alert\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 index.ts\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 src\n\u2502\xa0\xa0 \u251c\u2500\u2500 index.ts\n\u2502\xa0\xa0 \u2514\u2500\u2500 typings // ts types\n\u2502\xa0\xa0     \u251c\u2500\u2500 shime-global.d.ts\n\u2502\xa0\xa0     \u251c\u2500\u2500 shims-tsx.d.ts\n\u2502\xa0\xa0     \u2514\u2500\u2500 shims-vue.d.ts\n\u251c\u2500\u2500 postcss.config.js\n\u251c\u2500\u2500 public\n\u2502\xa0\xa0 \u251c\u2500\u2500 favicon.ico\n\u2502\xa0\xa0 \u2514\u2500\u2500 index.html\n\u251c\u2500\u2500 tests // unit tests\n\u2502\xa0\xa0 \u2514\u2500\u2500 unit\n\u2502\xa0\xa0     \u2514\u2500\u2500 example.spec.ts\n\u251c\u2500\u2500 tsconfig.json\n\u251c\u2500\u2500 tslint.json\n\u2514\u2500\u2500 vue.config.js // vue 3.x webpack\u914d\u7f6e\n")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u7ec4\u4ef6\u5f00\u53d1",(0,i.kt)("inlineCode",{parentName:"li"},"packages/alert/index.ts"))),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"import Alert from './src/main.vue';\n\n(<any>Alert).install = function(Vue: any) {\n  Vue.component(Alert.name, Alert);\n};\n\nexport default Alert;\n")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u5bfc\u51fa\u7ec4\u4ef6 ",(0,i.kt)("inlineCode",{parentName:"li"},"packages/index.ts"))),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"import Alert from './alert';\n\nconst components = [\n  Alert,\n]\n\nconst install: any = function (Vue: any) {\n  if (install.installed) {\n    return;\n  }\n  components.map(component => Vue.component(component.name, component))\n}\n\nif (typeof window !== 'undefined' && (<any>window).Vue) {\n  install((<any>window).Vue);\n}\n\nexport default {\n  install,\n  Alert,\n}\n\n")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u7ec4\u4ef6",(0,i.kt)("inlineCode",{parentName:"li"},"examples/main.ts"))),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"import Vue from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport Alert from '../packages/index';\n\nVue.config.productionTip = false;\n\nVue.use(Alert);\n\nnew Vue({\n  router,\n  render: (h) => h(App),\n}).$mount('#app');\n")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u6253\u5305"),(0,i.kt)("p",{parentName:"li"},"\u589e\u52a0\u6253\u5305",(0,i.kt)("inlineCode",{parentName:"p"},"scripts")),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"--target"),": \u6784\u5efa\u76ee\u6807\uff0c\u9ed8\u8ba4\u4e3a\u5e94\u7528\u6a21\u5f0f"),(0,i.kt)("p",{parentName:"li"}," ",(0,i.kt)("inlineCode",{parentName:"p"},"--dest")," : \u8f93\u51fa\u76ee\u5f55\uff0c\u9ed8\u8ba4 ",(0,i.kt)("inlineCode",{parentName:"p"},"dist")),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"[entry]"),": \u6700\u540e\u4e00\u4e2a\u53c2\u6570\u4e3a\u5165\u53e3\u6587\u4ef6\uff0c\u9ed8\u8ba4\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"src/App.vue")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'"scripts": {\n    "lib": "vue-cli-service build --target lib --name vue3-cui lib packages/index.ts",\n},\n')))))),(0,i.kt)("h4",{id:"\u95ee\u9898"},"\u95ee\u9898"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"vue 3.x"),"\u5b66\u4e60"),(0,i.kt)("li",{parentName:"ol"},"\u7ec4\u4ef6\u5e93\u5f00\u53d1"),(0,i.kt)("li",{parentName:"ol"},"\u6301\u7eed\u96c6\u6210\u5b66\u4e60")),(0,i.kt)("p",null,"\u5f85\u5b66\u4e60ing"),(0,i.kt)("p",null,"\u53c2\u8003\u8d44\u6599:"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://juejin.im/post/5bbab9de5188255c8c0cb0e3"},"\u8be6\u89e3\uff1aVue cli3 \u5e93\u6a21\u5f0f\u642d\u5efa\u7ec4\u4ef6\u5e93\u5e76\u53d1\u5e03\u5230 npm")))}u.isMDXComponent=!0},46073:function(e,n,t){n.Z=t.p+"assets/images/cui-git-init-d321922c1d83e79906d986d915090477.png"},99337:function(e,n,t){n.Z=t.p+"assets/images/cui-npm-init-55f1147b85c4dbe3746741324b446dbd.png"},35424:function(e,n,t){n.Z=t.p+"assets/images/git-push-error-a2eba18a5b6a16cb9f2415bbc76e0289.png"},12930:function(e,n,t){n.Z=t.p+"assets/images/new-repository-c095afbb9909a807a7d1819ab21328da.png"},33665:function(e,n,t){n.Z=t.p+"assets/images/npm-login-36e2e1d6e127add08d6352fd8045225f.png"},20551:function(e,n,t){n.Z=t.p+"assets/images/npm-publish-29b3390ddecbf3ef74ecb7068a523a50.png"},90642:function(e,n,t){n.Z=t.p+"assets/images/package-name-find-99d286af790178737fcac2a890b944dd.png"},87602:function(e,n,t){n.Z=t.p+"assets/images/vue-create-ee0b5608c32ef89c157d36d08594e998.png"}}]);