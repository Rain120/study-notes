"use strict";(self.webpackChunkstudy_notes=self.webpackChunkstudy_notes||[]).push([[4808],{3905:function(e,n,a){a.d(n,{Zo:function(){return s},kt:function(){return k}});var t=a(67294);function l(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function r(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function i(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?r(Object(a),!0).forEach((function(n){l(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function p(e,n){if(null==e)return{};var a,t,l=function(e,n){if(null==e)return{};var a,t,l={},r=Object.keys(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||(l[a]=e[a]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var o=t.createContext({}),d=function(e){var n=t.useContext(o),a=n;return e&&(a="function"==typeof e?e(n):i(i({},n),e)),a},s=function(e){var n=d(e.components);return t.createElement(o.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},c=t.forwardRef((function(e,n){var a=e.components,l=e.mdxType,r=e.originalType,o=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),c=d(a),k=l,u=c["".concat(o,".").concat(k)]||c[k]||m[k]||r;return a?t.createElement(u,i(i({ref:n},s),{},{components:a})):t.createElement(u,i({ref:n},s))}));function k(e,n){var a=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=a.length,i=new Array(r);i[0]=c;var p={};for(var o in n)hasOwnProperty.call(n,o)&&(p[o]=n[o]);p.originalType=e,p.mdxType="string"==typeof e?e:l,i[1]=p;for(var d=2;d<r;d++)i[d]=a[d];return t.createElement.apply(null,i)}return t.createElement.apply(null,a)}c.displayName="MDXCreateElement"},64394:function(e,n,a){a.r(n),a.d(n,{frontMatter:function(){return p},contentTitle:function(){return o},metadata:function(){return d},toc:function(){return s},default:function(){return c}});var t=a(87462),l=a(63366),r=(a(67294),a(3905)),i=["components"],p={sidebar_position:2},o="Lerna \u547d\u4ee4",d={unversionedId:"lerna/commands",id:"lerna/commands",title:"Lerna \u547d\u4ee4",description:"lerna.json \u914d\u7f6e",source:"@site/engineering/lerna/commands.md",sourceDirName:"lerna",slug:"/lerna/commands",permalink:"/study-notes/engineering/lerna/commands",tags:[],version:"current",lastUpdatedBy:"Rain120",lastUpdatedAt:1647059193,formattedLastUpdatedAt:"3/12/2022",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"sidebar",previous:{title:"Lerna \u5165\u95e8\u7bc7",permalink:"/study-notes/engineering/lerna/base"},next:{title:"\u5feb\u901f\u521b\u5efaLerna\u9879\u76ee",permalink:"/study-notes/engineering/lerna/quick-start"}},s=[{value:"lerna.json \u914d\u7f6e",id:"lernajson-\u914d\u7f6e",children:[],level:2},{value:"Lerna \u5168\u5c40\u914d\u7f6e",id:"lerna-\u5168\u5c40\u914d\u7f6e",children:[],level:2},{value:"Lerna \u8fc7\u6ee4\u5668",id:"lerna-\u8fc7\u6ee4\u5668",children:[],level:2},{value:"lerna init",id:"lerna-init",children:[{value:"\u7528\u6cd5\u5b9e\u4f8b",id:"\u7528\u6cd5\u5b9e\u4f8b",children:[],level:3},{value:"\u547d\u4ee4\u9009\u9879",id:"\u547d\u4ee4\u9009\u9879",children:[],level:3}],level:2},{value:"<code>lerna create &lt;name&gt; [loc]</code>",id:"lerna-create-name-loc",children:[{value:"\u7528\u6cd5\u5b9e\u4f8b",id:"\u7528\u6cd5\u5b9e\u4f8b-1",children:[],level:3},{value:"\u547d\u4ee4\u9009\u9879",id:"\u547d\u4ee4\u9009\u9879-1",children:[],level:3}],level:2},{value:"<code>lerna add &lt;package&gt;[@version] [--dev] [--exact] [--peer]</code>",id:"lerna-add-packageversion---dev---exact---peer",children:[{value:"\u7528\u6cd5\u5b9e\u4f8b",id:"\u7528\u6cd5\u5b9e\u4f8b-2",children:[],level:3},{value:"\u547d\u4ee4\u9009\u9879",id:"\u547d\u4ee4\u9009\u9879-2",children:[],level:3}],level:2},{value:"lerna bootstrap",id:"lerna-bootstrap",children:[{value:"\u7528\u6cd5\u5b9e\u4f8b",id:"\u7528\u6cd5\u5b9e\u4f8b-3",children:[],level:3},{value:"\u547d\u4ee4\u9009\u9879",id:"\u547d\u4ee4\u9009\u9879-3",children:[],level:3}],level:2},{value:"<code>lerna import &lt;dir&gt;</code>",id:"lerna-import-dir",children:[{value:"\u7528\u6cd5\u5b9e\u4f8b",id:"\u7528\u6cd5\u5b9e\u4f8b-4",children:[],level:3},{value:"\u547d\u4ee4\u9009\u9879",id:"\u547d\u4ee4\u9009\u9879-4",children:[],level:3}],level:2},{value:"lerna publish",id:"lerna-publish",children:[{value:"\u7528\u6cd5\u5b9e\u4f8b",id:"\u7528\u6cd5\u5b9e\u4f8b-5",children:[],level:3},{value:"\u547d\u4ee4\u9009\u9879",id:"\u547d\u4ee4\u9009\u9879-5",children:[],level:3}],level:2},{value:"<code>lerna version [bump]</code>",id:"lerna-version-bump",children:[{value:"\u7528\u6cd5\u5b9e\u4f8b",id:"\u7528\u6cd5\u5b9e\u4f8b-6",children:[],level:3},{value:"\u547d\u4ee4\u9009\u9879",id:"\u547d\u4ee4\u9009\u9879-6",children:[],level:3}],level:2},{value:"lerna changed",id:"lerna-changed",children:[{value:"\u7528\u6cd5\u5b9e\u4f8b",id:"\u7528\u6cd5\u5b9e\u4f8b-7",children:[],level:3},{value:"\u547d\u4ee4\u9009\u9879",id:"\u547d\u4ee4\u9009\u9879-7",children:[],level:3}],level:2},{value:"lerna diff package?",id:"lerna-diff-package",children:[{value:"\u7528\u6cd5\u5b9e\u4f8b",id:"\u7528\u6cd5\u5b9e\u4f8b-8",children:[],level:3},{value:"\u547d\u4ee4\u9009\u9879",id:"\u547d\u4ee4\u9009\u9879-8",children:[],level:3}],level:2},{value:"lerna run script",id:"lerna-run-script",children:[{value:"\u7528\u6cd5\u5b9e\u4f8b",id:"\u7528\u6cd5\u5b9e\u4f8b-9",children:[],level:3},{value:"\u547d\u4ee4\u9009\u9879",id:"\u547d\u4ee4\u9009\u9879-9",children:[],level:3}],level:2},{value:"lerna link",id:"lerna-link",children:[{value:"\u7528\u6cd5\u5b9e\u4f8b",id:"\u7528\u6cd5\u5b9e\u4f8b-10",children:[],level:3},{value:"\u547d\u4ee4\u9009\u9879",id:"\u547d\u4ee4\u9009\u9879-10",children:[],level:3}],level:2},{value:"lerna list",id:"lerna-list",children:[{value:"\u7528\u6cd5\u5b9e\u4f8b",id:"\u7528\u6cd5\u5b9e\u4f8b-11",children:[],level:3},{value:"\u547d\u4ee4\u9009\u9879",id:"\u547d\u4ee4\u9009\u9879-11",children:[],level:3}],level:2},{value:"lerna clean",id:"lerna-clean",children:[{value:"\u7528\u6cd5\u5b9e\u4f8b",id:"\u7528\u6cd5\u5b9e\u4f8b-12",children:[],level:3},{value:"\u547d\u4ee4\u9009\u9879",id:"\u547d\u4ee4\u9009\u9879-12",children:[],level:3}],level:2},{value:"lerna bootstrap",id:"lerna-bootstrap-1",children:[],level:2},{value:"\u7528\u6cd5\u5b9e\u4f8b",id:"\u7528\u6cd5\u5b9e\u4f8b-13",children:[],level:2},{value:"\u547d\u4ee4\u9009\u9879",id:"\u547d\u4ee4\u9009\u9879-13",children:[],level:2},{value:"lerna publish",id:"lerna-publish-1",children:[],level:2},{value:"\u7528\u6cd5\u5b9e\u4f8b",id:"\u7528\u6cd5\u5b9e\u4f8b-14",children:[],level:2},{value:"\u547d\u4ee4\u9009\u9879",id:"\u547d\u4ee4\u9009\u9879-14",children:[],level:2},{value:"\u53c2\u8003\u8d44\u6599",id:"\u53c2\u8003\u8d44\u6599",children:[],level:2}],m={toc:s};function c(e){var n=e.components,p=(0,l.Z)(e,i);return(0,r.kt)("wrapper",(0,t.Z)({},m,p,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"lerna-\u547d\u4ee4"},"Lerna \u547d\u4ee4"),(0,r.kt)("h2",{id:"lernajson-\u914d\u7f6e"},"lerna.json \u914d\u7f6e"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  // \u5f53\u524d\u5b58\u50a8\u5e93\u7684\u7248\u672c\uff0c\u5f53\u4e3a independent \u65f6\uff0c\u5f00\u542f\u72ec\u7acb\u6a21\u5f0f\n  "version": "independent",\n  // \u7528\u4e8e\u6307\u5b9a\u8fd0\u884c\u547d\u4ee4\u7684\u7279\u5b9a\u5ba2\u6237\u7aef\u3002 \u53ef\u66f4\u6539\u4e3a yarn \u6216\u8005 cnpm\n  "npmClient": "npm",\n  "useWorkspaces": false,\n  // \u7528\u4f5c\u5305\u88c5\u4f4d\u7f6e\u7684 glob \u6570\u7ec4\uff0c \u9ed8\u8ba4\u4e3a ["packages/*"], \u4e5f\u53ef\u4ee5\u4fee\u6539\u4e3a\u5176\u4ed6\u76ee\u5f55\n  "packages": ["packages/*"],\n  "command": {\n    // lerna publish \u76f8\u5173\n    "publish": {\n      // \u5ffd\u7565\u4e0d\u5fc5\u8981\u7684\u66f4\u6539\u53d1\u5e03\u65b0\u7248\u672c\n      "ignoreChanges": ["**/*.md", "__tests__"],\n      "allowBranch": "main",\n      // \u5f53\u6d88\u606f\u8bb0\u5f55\u91cc\u5305\u542b %s \u5c06\u4f1a\u66ff\u6362\u4e3a v1.1.1, \u5982\u679c\u662f %v \u5219\u76f4\u63a5\u66ff\u6362\u4e3a 1.1.1\n      // \u5982\u679c\u662f independent \u6a21\u5f0f\u5219\u4f1a\u72ec\u7acb\u66f4\u65b0\u6bcf\u4e2a\u5305\u7684\u7248\u672c\n      // \u5177\u4f53\u8bf7\u67e5\u770b [@lerna/json](https://github.com/lerna/lerna/tree/master/commands/version#--message-msg)\n      "message": "chore(release): publish %s"\n    },\n    // lerna run \u76f8\u5173\n    "run": {\n      "stream": true\n    },\n    // lerna bootstrap \u76f8\u5173\n    "bootstrap": {\n      "ignorePrepublish": true,\n      "hoist": true\n    }\n  },\n  // \u7528\u4f5c\u63d0\u5347\u67d0\u4e9b\u5305\u7684 glob \u6570\u7ec4\n  "hoist": ["jest", "typescript"],\n  // changelog \u76f8\u5173\u914d\u7f6e\n  "changelog": {\n    "repo": "rain120/lerna-quick-start",\n    "labels": {\n      "PR: New Feature": ":rocket: New Features",\n      "PR: Breaking Change": ":boom: Breaking Changes",\n      "PR: Bug Fix": ":bug: Bug Fix",\n      "PR: Documentation": ":memo: Documentation",\n      "PR: Internal": ":house: Internal",\n      "PR: Underlying Tools": ":hammer: Underlying Tools"\n    },\n    "cacheDir": ".changelog"\n  }\n}\n')),(0,r.kt)("h2",{id:"lerna-\u5168\u5c40\u914d\u7f6e"},"Lerna \u5168\u5c40\u914d\u7f6e"),(0,r.kt)("p",null,"\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"lerna --help"),"\u6216\u8005\u5b98\u65b9\u6587\u6863\u53ef\u83b7\u53d6\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"--loglevel <silent|error|warn|success|info|verbose|silly>"),": \u8981\u62a5\u544a\u7684\u65e5\u5fd7\u7ea7\u522b\u3002\u5931\u8d25\u65f6\uff0c\u6240\u6709\u65e5\u5fd7\u90fd\u5c06\u5199\u5165\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u4e2d\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"lerna-debug.log"),"\u3002 \u9ed8\u8ba4\u503c\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"info"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"--concurrency"),": ",(0,r.kt)("inlineCode",{parentName:"p"},"Lerna")," \u5e76\u884c\u6267\u884c\u4efb\u52a1\u65f6\u8981\u4f7f\u7528\u591a\u5c11\u4e2a\u7ebf\u7a0b\uff08\u9ed8\u8ba4\u4e3a\u903b\u8f91 ",(0,r.kt)("inlineCode",{parentName:"p"},"CPU")," \u5185\u6838\u6570\uff09")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"--reject-cycles"),": \u5faa\u73af\u5f15\u7528\u7acb\u5373\u62a5\u9519")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"--no-progress"),": \u7981\u7528\u8fdb\u5ea6\u6761(\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"CI")," \u73af\u5883\u4e2d\uff0c\u60c5\u51b5\u603b\u662f\u5982\u6b64)\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"--no-sort"),": \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u4efb\u52a1\u90fd\u6309\u7167\u62d3\u6251\u6392\u5e8f\u7684\u987a\u5e8f\u5728\u7a0b\u5e8f\u5305\u4e0a\u6267\u884c\uff0c\u8be5\u9009\u9879\u53ef\u4ee5\u7981\u7528\u6392\u5e8f\uff0c\u4ee5\u6700\u5927\u7684\u5e76\u53d1\u6027\u4ee5\u4efb\u610f\u987a\u5e8f\u6267\u884c\u4efb\u52a1\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"--max-buffer <bytes>"),": \u4e3a\u6bcf\u4e2a\u57fa\u7840\u6d41\u7a0b\u8c03\u7528\u8bbe\u7f6e\u6700\u5927\u7f13\u51b2\u533a\u957f\u5ea6, \u5f53 \u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"lerna import")," \u5bfc\u5165\u5177\u6709\u5927\u91cf\u63d0\u4ea4\u7684\u5b58\u50a8\u5e93\u65f6\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u5185\u7f6e\u7f13\u51b2\u533a\u957f\u5ea6\u4e0d\u8db3\u7684\u95ee\u9898\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u8be5\u9009\u9879\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898"))),(0,r.kt)("h2",{id:"lerna-\u8fc7\u6ee4\u5668"},"Lerna \u8fc7\u6ee4\u5668"),(0,r.kt)("p",null,"\u7528\u6765\u8fc7\u6ee4\u547d\u4ee4\u6267\u884c\u65f6\u7684\u8303\u56f4, \u8be6\u89c1",(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@lerna/filter-options"},(0,r.kt)("inlineCode",{parentName:"a"},"@lerna/filter-options")),"\u3002\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"lerna --help"),"\u6216\u8005\u5b98\u65b9\u6587\u6863\u53ef\u83b7\u53d6\u3002"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Filter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"--scope <glob>")),(0,r.kt)("td",{parentName:"tr",align:null},"\u4ec5\u5305\u542b",(0,r.kt)("inlineCode",{parentName:"td"},"glob"),"\u6240\u5339\u914d\u5230\u7684",(0,r.kt)("inlineCode",{parentName:"td"},"package"),", \u9650\u5236 ",(0,r.kt)("inlineCode",{parentName:"td"},"lerna")," \u547d\u4ee4\u6267\u884c\u8303\u56f4")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"--ignore <glob>")),(0,r.kt)("td",{parentName:"tr",align:null},"\u6392\u9664",(0,r.kt)("inlineCode",{parentName:"td"},"glob"),"\u5339\u914d\u5230\u7684",(0,r.kt)("inlineCode",{parentName:"td"},"package"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"--no-private")),(0,r.kt)("td",{parentName:"tr",align:null},"\u6392\u9664\u79c1\u6709",(0,r.kt)("inlineCode",{parentName:"td"},"package"),", \u9ed8\u8ba4\u662f\u5305\u542b\u7684")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"--since")),(0,r.kt)("td",{parentName:"tr",align:null},"\u4ec5\u5305\u62ec\u81ea\u6307\u5b9a",(0,r.kt)("inlineCode",{parentName:"td"},"[ref]"),"\u4e4b\u540e\u5df2\u66f4\u6539\u7684\u8f6f\u4ef6\u5305,\u5982\u679c\u6ca1\u6709\u4f20\u9012\u53c2\u8003, \u5219\u9ed8\u8ba4\u4e3a\u6700\u65b0\u6807\u7b7e\u3002")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"--exclude-dependents")),(0,r.kt)("td",{parentName:"tr",align:null},"\u8fd0\u884c\u547d\u4ee4\u65f6\u6392\u9664\u6240\u6709\u4f20\u9012\u4f9d\u8d56\u9879, \u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"td"},"--since"),", \u5c06\u8986\u76d6\u9ed8\u8ba4\u7684\u201c\u66f4\u6539\u201d\u7b97\u6cd5\u3002")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"--include-dependents")),(0,r.kt)("td",{parentName:"tr",align:null},"\u8fd0\u884c\u547d\u4ee4\u65f6\u5305\u62ec\u6240\u6709\u4f20\u9012\u4f9d\u8d56\u9879, \u65e0\u8bba",(0,r.kt)("inlineCode",{parentName:"td"},"--scope"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"-ignore"),"\u6216",(0,r.kt)("inlineCode",{parentName:"td"},"--since"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"--include-dependencies")),(0,r.kt)("td",{parentName:"tr",align:null},"\u8fd0\u884c\u547d\u4ee4\u65f6\u5305\u62ec\u6240\u6709\u4f20\u9012\u4f9d\u8d56\u9879, \u65e0\u8bba",(0,r.kt)("inlineCode",{parentName:"td"},"--scope"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"-ignore"),"\u6216",(0,r.kt)("inlineCode",{parentName:"td"},"--since"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"--include-merged-tags")),(0,r.kt)("td",{parentName:"tr",align:null},"\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"td"},"--since"),"\u8fd0\u884c\u547d\u4ee4\u65f6, \u5305\u62ec\u6765\u81ea\u5408\u5e76\u5206\u652f\u7684\u6807\u7b7e\u3002")))),(0,r.kt)("h2",{id:"lerna-init"},"lerna init"),(0,r.kt)("p",null,"\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"Lerna")," \u4ed3\u5e93\u6216\u5c06\u73b0\u6709\u7684\u4ed3\u5e93\u5347\u7ea7\u5230",(0,r.kt)("inlineCode",{parentName:"p"},"Lerna"),"\u7684\u5f53\u524d\u7248\u672c\u3002"),(0,r.kt)("h3",{id:"\u7528\u6cd5\u5b9e\u4f8b"},"\u7528\u6cd5\u5b9e\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"lerna init\n")),(0,r.kt)("p",null,"\u751f\u6210\u7684\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"lerna-repo/\n  packages/\n  package.json\n  lerna.json\n")),(0,r.kt)("h3",{id:"\u547d\u4ee4\u9009\u9879"},"\u547d\u4ee4\u9009\u9879"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"\u547d\u4ee4\u9009\u9879\uff1a\n  --exact            \u5728package.json\u4e2d\u6307\u5b9alerna\u4f9d\u8d56\u7248\u672c\u800c\u65e0\u9700\u63d2\u5165\u7b26\u53f7\uff08^\uff09[\u5e03\u5c14]\n  --independent, -i  \u72ec\u7acb\u7248\u672c\u5305\u88c5                                    [\u5e03\u5c14]\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"independent"),": \u4f7f\u7528\u72ec\u7acb\u7684\u7248\u672c\u63a7\u5236\u6a21\u5f0f, \u5b83\u5c06\u4f1a\u5ffd\u7565",(0,r.kt)("inlineCode",{parentName:"li"},"lerna.json"),"\u4e2d\u5b9a\u4e49\u7684",(0,r.kt)("inlineCode",{parentName:"li"},"version")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"}," Fixed/Locked")," ",(0,r.kt)("inlineCode",{parentName:"li"},"(default) "),": ",(0,r.kt)("inlineCode",{parentName:"li"},"Fixed"),"\u6a21\u5f0f\u4e0b, \u9879\u76ee\u901a\u8fc7\u5355\u4e00\u7684\u7248\u672c\u8fdb\u884c\u63a7\u5236\u3002\u7248\u672c\u53f7\u653e\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u7684",(0,r.kt)("inlineCode",{parentName:"li"},"lerna.json"),"\u6587\u4ef6\u7684",(0,r.kt)("inlineCode",{parentName:"li"},"version"),"\u8fd9\u4e2a\u5b57\u6bb5\u3002\u5f53\u4f60\u6267\u884c",(0,r.kt)("inlineCode",{parentName:"li"}," lerna publish"),", \u5982\u679c\u6709\u6587\u4ef6\u66f4\u65b0, \u5b83\u5c06\u53d1\u5e03\u65b0\u7684\u7248\u672c\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"lerna-init-i.png",src:a(15884).Z})),(0,r.kt)("h2",{id:"lerna-create-name-loc"},(0,r.kt)("inlineCode",{parentName:"h2"},"lerna create <name> [loc]")),(0,r.kt)("p",null,"\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"lerna")," \u7ba1\u7406\u5305"),(0,r.kt)("h3",{id:"\u7528\u6cd5\u5b9e\u4f8b-1"},"\u7528\u6cd5\u5b9e\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"lerna create soul-gem\nlerna create soul-gem plugins # soul-gem\u5305 \u751f\u6210\u5230 plugins \u6587\u4ef6\u4e2d\n")),(0,r.kt)("h3",{id:"\u547d\u4ee4\u9009\u9879-1"},"\u547d\u4ee4\u9009\u9879"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"<name>            \u8f6f\u4ef6\u5305\u540d\u79f0\uff08\u5305\u62ec\u8303\u56f4\uff09, \u5fc5\u987b\u662f\u672c\u5730\u552f\u4e00\u7684_and_\u516c\u5f00\u53ef\u7528[\u5b57\u7b26\u4e32] [\u5fc5\u586b]\n[loc]             \u81ea\u5b9a\u4e49\u7a0b\u5e8f\u5305\u4f4d\u7f6e, \u9ed8\u8ba4\u4e3a\u7b2c\u4e00\u4e2a\u914d\u7f6e\u7684\u7a0b\u5e8f\u5305\u4f4d\u7f6e[\u5b57\u4e32]\n\n\u547d\u4ee4\u9009\u9879\uff1a\n  --access        \u4f7f\u7528\u8303\u56f4\u65f6, \u8bbe\u7f6epublishConfig.access\u503c[\u9009\u62e9\uff1a\u201c\u516c\u5171\u201d, \u201c\u53d7\u9650\u5236\u201d] [\u9ed8\u8ba4\u503c\uff1a\u516c\u5171]\n  --bin           \u7a0b\u5e8f\u5305\u5177\u6709\u53ef\u6267\u884c\u6587\u4ef6\u3002\u4f7f\u7528--bin\u81ea\u5b9a\u4e49<executabLername> [\u9ed8\u8ba4\u503c\uff1a<name>]\n  --description   \u7a0b\u5e8f\u5305\u63cf\u8ff0[\u5b57\u7b26\u4e32]\n  --dependencies  \u8f6f\u4ef6\u5305\u4f9d\u8d56\u5173\u7cfb\u7684\u5217\u8868[\u6570\u7ec4]\n  --es-module     \u521d\u59cb\u5316\u8f6c\u8bd1\u7684ES\u6a21\u5757\n  --homepage      \u8f6f\u4ef6\u5305\u4e3b\u9875, \u9ed8\u8ba4\u4e3a\u6839\u7684\u5b50\u8def\u5f84pkg.homepage [\u5b57\u7b26\u4e32]\n  --keywords      \u8f6f\u4ef6\u5305\u5173\u952e\u5b57\u5217\u8868[array]\n  --license       \u6240\u9700\u7684\u8f6f\u4ef6\u5305\u8bb8\u53ef\u8bc1\uff08SPDX\u6807\u8bc6\u7b26\uff09[\u9ed8\u8ba4\uff1aISC]\n  --private       \u5c06\u65b0\u8f6f\u4ef6\u5305\u8bbe\u4e3a\u79c1\u6709, \u4ece\u672a\u53d1\u5e03\n  --registry      \u914d\u7f6e\u8f6f\u4ef6\u5305\u7684publishConfig.registry [string]\n  --tag           \u914d\u7f6e\u8f6f\u4ef6\u5305\u7684publishConfig.tag [string]\n  --yes            \u8df3\u8fc7\u6240\u6709\u63d0\u793a, \u63a5\u53d7\u9ed8\u8ba4\u503c\n")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"lerna-create.png",src:a(27736).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"lerna-create-pkg.png",src:a(10102).Z})),(0,r.kt)("h2",{id:"lerna-add-packageversion---dev---exact---peer"},(0,r.kt)("inlineCode",{parentName:"h2"},"lerna add <package>[@version] [--dev] [--exact] [--peer]")),(0,r.kt)("p",null,"\u5411\u5339\u914d\u7684\u8f6f\u4ef6\u5305\u6dfb\u52a0\u5355\u4e2a\u4f9d\u8d56\u9879"),(0,r.kt)("h3",{id:"\u7528\u6cd5\u5b9e\u4f8b-2"},"\u7528\u6cd5\u5b9e\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"# \u5b89\u88c5 react 16.8.0 \u5230 packages \u6240\u5305\u542b\u7684 package \u4e2d\nlerna add react@16.8.0\n\n# \u8f6f\u4ef6\u5305/\u524d\u7f00-*\u5c06module-1\u8f6f\u4ef6\u5305\u6dfb\u52a0\u5230\u201c prefix-\u201d\u524d\u7f00\u6587\u4ef6\u5939\u4e2d\u7684\u8f6f\u4ef6\u5305\u4e2d\nlerna add module-1\n\n# \u5c06module-1\u5b89\u88c5\u5230module-2\nlerna add module-1 --scope = module-2\n\n# \u5728devDependencies\u4e2d\u5c06module-1\u5b89\u88c5\u5230module-2\nlerna add module-1 --scope = module-2 --dev\n\n# \u5728peerDependencies\u4e2d\u5c06module-1\u5b89\u88c5\u5230module-2\nlerna add module-1 --scope = module-2 --peer\n\n# \u5728module-1\u4ee5\u5916\u7684\u6240\u6709\u6a21\u5757\u4e2d\u5b89\u88c5module-1\nlerna add module-1\n\n # \u8df3\u8fc7\u81ea\u52a8\u7684\u201c lerna bootstrap\u201d\nlerna add module-1 --no-bootstrap\n\n# \u5728\u6240\u6709\u6a21\u5757\u4e2d\u5b89\u88c5babel-core\nlerna add babel-core\n")),(0,r.kt)("h3",{id:"\u547d\u4ee4\u9009\u9879-2"},"\u547d\u4ee4\u9009\u9879"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"pkg    # \u8981\u6dfb\u52a0\u4e3a\u4f9d\u8d56\u9879\u7684\u7a0b\u5e8f\u5305\u540d\u79f0\n\xa0globs  # \u5339\u914d\u7684\u53ef\u9009\u8f6f\u4ef6\u5305\u76ee\u5f55globs\n\u547d\u4ee4\u9009\u9879\uff1a\n\xa0\xa0-D, --dev          \u4fdd\u5b58\u5230devDependencies\n\xa0\xa0-E, --exact        \u5b8c\u5168\u4fdd\u5b58\u7248\u672c\n\xa0\xa0-P, --peer         \u4fdd\u5b58\u5230peerDependencies\n\xa0\xa0--registry         \u5c06\u6307\u5b9a\u7684\u6ce8\u518c\u8868\u7528\u4e8e\u6240\u6709npm\u5ba2\u6237\u7aef\u64cd\u4f5c\u3002\n\xa0\xa0--no-bootstrap     \u8fdb\u884c\u66f4\u6539\u540e, \u4e0d\u8981\u81ea\u52a8\u94fe\u63a5\u201c lerna bootstrap\u201d\u3002\n")),(0,r.kt)("h2",{id:"lerna-bootstrap"},"lerna bootstrap"),(0,r.kt)("p",null,"\u5728\u5f53\u524d\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Lerna"),"\u5b58\u50a8\u5e93\u4e2d\u5f15\u5bfc\u8f6f\u4ef6\u5305\u3002\u5b89\u88c5\u5b83\u4eec\u7684\u6240\u6709\u4f9d\u8d56\u6027\u5e76\u94fe\u63a5\u4efb\u4f55\u4ea4\u53c9\u4f9d\u8d56\u6027\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6b64\u547d\u4ee4\u81f3\u5173\u91cd\u8981, \u56e0\u4e3a\u5b83\u4f7f\u60a8\u53ef\u4ee5\u4f7f\u7528\u8f6f\u4ef6\u5305\u540d\u79f0, require()\u5c31\u597d\u50cf\u8f6f\u4ef6\u5305\u5df2\u7ecf\u5b58\u5728\u5e76\u5728\u60a8\u7684 node_modules \u6587\u4ef6\u5939\u4e2d\u53ef\u7528\u4e00\u6837\u3002")),(0,r.kt)("p",null,"\u8fd0\u884c\u8fd9\u4e2a\u547d\u4ee4\u76f8\u5f53\u4e8e\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"npm install")," \u6bcf\u4e2a\u8f6f\u4ef6\u5305\u7684\u6240\u6709\u5916\u90e8\u4f9d\u8d56\u9879\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5c06\u6240\u6709 ",(0,r.kt)("inlineCode",{parentName:"p"},"packages")," \u76f8\u4e92\u4f9d\u8d56\u7684 Lerna \u94fe\u63a5\u5728\u4e00\u8d77\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"npm run prepublish")," \u5728\u6240\u6709 ",(0,r.kt)("inlineCode",{parentName:"p"},"bootstrapped")," \u8f6f\u4ef6\u5305\u4e2d\uff08\u9664\u975e",(0,r.kt)("inlineCode",{parentName:"p"},"--ignore-prepublish")," \u901a\u8fc7\uff09\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"npm run prepare")," \u5728\u6240\u6709 ",(0,r.kt)("inlineCode",{parentName:"p"},"bootstrapped")," \u8f6f\u4ef6\u5305\u4e2d"))),(0,r.kt)("h3",{id:"\u7528\u6cd5\u5b9e\u4f8b-3"},"\u7528\u6cd5\u5b9e\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"lerna bootstrap\n")),(0,r.kt)("h3",{id:"\u547d\u4ee4\u9009\u9879-3"},"\u547d\u4ee4\u9009\u9879"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"--hoist \u5c06 `glob` \u5339\u914d\u7684\u6240\u6709\u4f9d\u8d56\u60f3\u63d0\u5347\u81f3\u6839\u76ee\u5f55\uff0c\u4ee5\u4fbf\u4e8e\u6240\u6709\u5305\u90fd\u53ef\u4ee5\u7528\uff0c\u5982\u679c\u9009\u9879\u5b58\u5728\u4f46\u672a\u7ed9\u5b9a `glob`\uff0c\u5219\u9ed8\u8ba4\u4e3a **\uff08\u63d0\u5347\u6240\u6709\u5185\u5bb9\uff09\u3002\u5173\u4e8e\u8be5\u914d\u7f6e\u7684\u66f4\u591a\u8bf4\u660e\u5373\u4f18\u7f3a\u70b9\u53ef\u4ee5\u67e5\u770b [hoist documentation](https://github.com/lerna/lerna/blob/master/doc/hoist.md)\n\n--nohoist \u5f53\u548c `--hoist` \u540c\u65f6\u4f7f\u7528\u662f\uff0c\u6784\u5efa\u8fc7\u7a0b\u51fa\u73b0\u5f02\u5e38\u6216\u8005\u8b66\u544a\u5c06\u4f1a\u505c\u6b62\u5f15\u5bfc\n\n--ignore-prepublish \u4e0d\u8981\u5728\u5f15\u5bfc\u7a0b\u5e8f\u5305\u4e2d\u8fd0\u884c\u9884\u53d1\u5e03\u7684\u751f\u547d\u5468\u671f\u811a\u672c\u3002\n\n--ignore-scripts \u4e0d\u8981\u5728\u81ea\u4e3e\u7a0b\u5e8f\u5305\u4e2d\u8fd0\u884c _any_ \u751f\u547d\u5468\u671f\u811a\u672c\n\n--npm-clientExecutable \u4f7f\u7528\u5176\u4ed6\u6e90(npm, yarn, pnpm, ...)\u5b89\u88c5\u4f9d\u8d56\n\n--registry \u6307\u5b9a\u7684 registry\n\n--strict \u5f53\u548c `--hoist` \u540c\u65f6\u4f7f\u7528\u662f\uff0c\u6784\u5efa\u8fc7\u7a0b\u51fa\u73b0\u5f02\u5e38\u6216\u8005\u8b66\u544a\u5c06\u4f1a\u505c\u6b62\u5f15\u5bfc\u3002\n\n--use-workspaces     \u6570\u7ec4\u4e2d\u7684\u503c\u662f `Lerna` \u5c06\u64cd\u4f5c\u59d4\u6258\u7ed9 `yarn` \u7684\u547d\u4ee4\n\n--force-local  \u4e0d\u7ba1\u7248\u672c\u8303\u56f4\u5339\u914d\u5982\u4f55\uff0c\u5f3a\u5236\u672c\u5730\u540c\u7ea7\u94fe\u63a5\n\n--contents \u5b50\u76ee\u5f55\u7528\u4f5c\u4efb\u4f55\u94fe\u63a5\u7684\u6e90\u3002 \u5fc5\u987b\u5e94\u7528\u4e8e\u6240\u6709\u8f6f\u4ef6\u5305\u3002\n\n")),(0,r.kt)("h2",{id:"lerna-import-dir"},(0,r.kt)("inlineCode",{parentName:"h2"},"lerna import <dir>")),(0,r.kt)("p",null,"\u5c06\u672c\u5730\u8def\u5f84",(0,r.kt)("inlineCode",{parentName:"p"},"<pathToRepo>"),"\u4e2d\u7684\u5305\u5bfc\u5165\u5177\u6709\u63d0\u4ea4\u5386\u53f2\u8bb0\u5f55\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"package / <directory-name>"),"\u4e2d, \u5c06\u5e26\u6709\u63d0\u4ea4\u5386\u53f2\u8bb0\u5f55\u7684\u5305\u5bfc\u5165\u5230 ",(0,r.kt)("inlineCode",{parentName:"p"},"monorepo")," \u4e2d\u3002"),(0,r.kt)("h3",{id:"\u7528\u6cd5\u5b9e\u4f8b-4"},"\u7528\u6cd5\u5b9e\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"lerna import ./\n")),(0,r.kt)("h3",{id:"\u547d\u4ee4\u9009\u9879-4"},"\u547d\u4ee4\u9009\u9879"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'dir # \u5916\u90e8git\u4ed3\u5e93\u7684\u8def\u5f84, \u8be5\u4ed3\u5e93\u5305\u542b\u4e00\u4e2anpm\u5305[\u5fc5\u9700]\n\n\u547d\u4ee4\u9009\u9879\uff1a\n   --flatten          \u5f53\u5bfc\u5165\u5177\u6709\u5408\u5e76\u63d0\u4ea4\u7684\u5b58\u50a8\u5e93\u65f6,\u5bfc\u5165\u547d\u4ee4\u5c06\u65e0\u6cd5\u5e94\u7528\u6240\u6709\u63d0\u4ea4. \u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u6b64\u6807\u5fd7\u6765\u8bf7\u6c42\u5bfc\u5165"flatten"\u5386\u53f2,\u5373\u6bcf\u6b21\u5408\u5e76\u63d0\u4ea4, \u4f5c\u4e3a\u5355\u4e2a\u5408\u5e76\u7684\u66f4\u6539.\n   --dest             \u6307\u5b9a\u8f93\u51fa\u76ee\u5f55, \u9ed8\u8ba4\u4e3a packages \u76ee\u5f55\n   --preserve-commit   \u6bcf\u4e2a `git` \u63d0\u4ea4\u90fd\u6709\u4e00\u4e2a\u4f5c\u8005\u548c\u4e00\u4e2a\u63d0\u4ea4\u8005\uff0c`lerna import` \u4ece\u5916\u90e8\u5b58\u50a8\u5e93\u91cd\u65b0\u521b\u5efa\u6bcf\u4e2a\u63d0\u4ea4\uff0c\u56e0\u6b64\u63d0\u4ea4\u8005\u5c06\u6210\u4e3a\u5f53\u524d\u7684 `git` \u7528\u6237, \u8fd9\u662f\u6b63\u786e\u7684\uff0c\u4f46\u53ef\u80fd\u662f\u4e0d\u5e0c\u671b\u7684\u3002 \u542f\u7528\u6b64\u9009\u9879\u5c06\u4fdd\u7559\u539f\u59cb\u63d0\u4ea4\u8005\uff08\u548c\u63d0\u4ea4\u65e5\u671f\uff09\uff0c\u4ee5\u907f\u514d\u6b64\u7c7b\u95ee\u9898\u3002\n   -y, --yes          \u8df3\u8fc7\u6240\u6709\u786e\u8ba4\u63d0\u793a\n')),(0,r.kt)("h2",{id:"lerna-publish"},"lerna publish"),(0,r.kt)("p",null,"\u521b\u5efa\u4e00\u4e2a\u65b0\u7248\u672c\u7684\u5df2\u66f4\u65b0\u7684\u8f6f\u4ef6\u5305\u3002\u63d0\u793a\u65b0\u7248\u672c\u5e76\u66f4\u65b0",(0,r.kt)("inlineCode",{parentName:"p"},"git"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"npm"),"\u4e0a\u7684\u6240\u6709\u8f6f\u4ef6\u5305\u3002"),(0,r.kt)("h3",{id:"\u7528\u6cd5\u5b9e\u4f8b-5"},"\u7528\u6cd5\u5b9e\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"lerna publish\n")),(0,r.kt)("h3",{id:"\u547d\u4ee4\u9009\u9879-5"},"\u547d\u4ee4\u9009\u9879"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"--npm-tag [tagname]"),": \u4f7f\u7528\u7ed9\u5b9a\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"npm dist-tag"),"\u53d1\u5e03\u5230",(0,r.kt)("inlineCode",{parentName:"p"},"npm"),"\uff08\u9ed8\u8ba4\u4e3a\u6700\u65b0\uff09\u3002"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"--canary"),"/ ",(0,r.kt)("inlineCode",{parentName:"p"},"-c"),": \u521b\u5efa\u4e00\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"canary"),"\u7248\u672c\u3002"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"--skip-git")," : \u4e0d\u8981\u8fd0\u884c\u4efb\u4f55",(0,r.kt)("inlineCode",{parentName:"p"},"git"),"\u547d\u4ee4\u3002"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"--force-publish [packages]"),": \u5f3a\u5236\u53d1\u5e03\u6307\u5b9a\u7684\u8f6f\u4ef6\u5305\uff08\u4ee5\u9017\u53f7\u5206\u9694\uff09\u6216\u4f7f\u7528\u7684\u6240\u6709\u8f6f\u4ef6\u5305 ",(0,r.kt)("inlineCode",{parentName:"p"},"*"),"\uff08\u8df3\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"git diff"),"\u68c0\u67e5\u66f4\u6539\u7684\u8f6f\u4ef6\u5305\uff09\u3002"),(0,r.kt)("h2",{id:"lerna-version-bump"},(0,r.kt)("inlineCode",{parentName:"h2"},"lerna version [bump]")),(0,r.kt)("p",null,"\u66f4\u6539 ",(0,r.kt)("inlineCode",{parentName:"p"},"Lerna")," \u7ba1\u7406\u7684\u5305\u7248\u672c"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Note"),": \u53d1\u5e03\u7248\u672c\u524d\u9700\u8981 ",(0,r.kt)("inlineCode",{parentName:"p"},"commit")," \u672c\u5730\u7684\u4fee\u6539\u3002"),(0,r.kt)("h3",{id:"\u7528\u6cd5\u5b9e\u4f8b-6"},"\u7528\u6cd5\u5b9e\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"lerna version 1.2.3\n\nlerna version [major | minor | patch | premajor | preminor | prepatch | prerelease]\n\nlerna version // \u4eceprompt \u4e2d\u9009\u62e9\n")),(0,r.kt)("h3",{id:"\u547d\u4ee4\u9009\u9879-6"},"\u547d\u4ee4\u9009\u9879"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"--allow-branch \u63a5\u53d7\u4e00\u4e2a glob \u6570\u7ec4, \u6807\u8bb0\u53d1\u5e03\u7248\u672c\u5141\u8bb8\u7684\u5206\u652f\uff0c\u9ed8\u8ba4\u53ea\u6709 master \u5206\u652f\n\n--amend \u8df3\u8fc7\u81ea\u52a8\u63d0\u4ea4\n\n--conventional-commits \u53d1\u5e03\u4e00\u4e2a\u5e38\u89c4\u7248\u672c\u7684\u540c\u65f6 \u751f\u6210 CHANGELOG.md, \u8be5\u63d0\u4ea4\u65b9\u5f0f\u662f\u76f4\u63a5\u4e2d\u7248\u672c\u53f7\u53d1\u751f\u53d8\u5316\uff0c\u4e0d\u652f\u6301\u5c0f\u7248\u672c\u53d8\u5316\n\n--conventional-prerelease \u5f3a\u5236\u5f53\u524d\u7248\u672c\u4e3a\u9884\u53d1\u5e03\u7248\u672c\uff0c\u800c\u4e0d\u662f\u4e3b\u7248\u672c\u3002\u4e0d\u6dfb\u52a0\u8fd9\u4e2a\u53c2\u6570\uff0c `--conventional-commits` \u53ea\u4f1a\u5728\u5f53\u524d\u7248\u672c\u662f\u9884\u53d1\u5e03\u7248\u672c \u624d\u4f1a\u9ed8\u8ba4\u63d0\u4ea4\u4e3a \u9884\u53d1\u5e03\n\n--conventional-graduate\uff1a \u5f3a\u5236\u9884\u53d1\u5e03\u7248\u672c\uff0c\u5347\u7ea7\u4e3a\u53d1\u5e03\u7248\u672c\n\n--force-publish\uff1a\u8df3\u8fc7\u68c0\u67e5 lerna checked \u548c git diff, \u5f3a\u5236\u53d1\u5e03\u4e00\u4e2a\u7248\u672c\n\n--git-remote \u66ff\u6362\u63d0\u4ea4\u7684\u8fdc\u7aef\u5730\u5740\n\n--ignore-changes \u63a5\u53d7\u4e00\u4e2a glob \u6570\u7ec4\uff0c\u53d1\u5e03\u7248\u672c\u5ffd\u7565\u5339\u914d\u7684\u6587\u4ef6\u53d8\u52a8\u53d1\u751f\u7684\u66f4\u6539\u3002\u901a\u8fc7`--no-ignore-changes` \u5b8c\u5168\u7981\u7528\u3002\n\n--message, -m <msg> \u76f8\u5f53\u4e8e git commit -m <msg>, \u63d0\u4ea4\u7684\u5185\u5bb9 %s \u8868\u793a\u5e26 v \u7684\u7248\u672c\u53f7\uff0c %dv \u8868\u793a\u7248\u672c\u53f7\n\n--no-push \u4e0d push \u5185\u5bb9\u5230 git\n\n--no-changelog \u4f7f\u7528` --conventional-commits` \u65f6\u4e0d\u751f\u6210 `CHANGELOG.md` \u6587\u4ef6\u3002\n\n--no-commit-hooks\u5728\u63d0\u4ea4\u7248\u672c\u66f4\u6539\u65f6\u4e0d\u8981\u8fd0\u884cgit commit\u6302\u94a9\u3002\n\n--no-git-tag-version\u4e0d\u63d0\u4ea4\u6216\u6807\u8bb0\u7248\u672c\u66f4\u6539\u3002\n\n--preid \u5728\u5bf9\u9884\u53d1\u884c\u7248\u672c\u8fdb\u884c\u7248\u672c\u63a7\u5236\u65f6\u6307\u5b9a\u9884\u53d1\u884c\u6807\u8bc6\u7b26\n\n--sign-git-commit \u5c06 `--gpg-sign` \u6807\u5fd7\u4f20\u9012\u7ed9 `git commit`\u3002\n\n--sign-git-tag \u5c06 `--sign` \u6807\u5fd7\u4f20\u9012\u7ed9 `git tag`\u3002\n\n--tag-version-prefix \u81ea\u5b9a\u4e49\u6807\u7b7e\u524d\u7f00\u3002\u8981\u5b8c\u5168\u5220\u9664\uff0c\u8bf7\u4f20\u9012\u4e00\u4e2a\u7a7a\u5b57\u7b26\u4e32\u3002\n\n-y, --yes \u8df3\u8fc7\u6240\u6709\u786e\u8ba4\u63d0\u793a\u3002\n\n")),(0,r.kt)("h2",{id:"lerna-changed"},"lerna changed"),(0,r.kt)("p",null,"\u5217\u51fa\u81ea\u4e0a\u4e00\u4e2a\u6807\u8bb0\u7248\u672c\u4ee5\u6765\u5df2\u66f4\u6539\u7684\u672c\u5730\u8f6f\u4ef6\u5305\u3002"),(0,r.kt)("h3",{id:"\u7528\u6cd5\u5b9e\u4f8b-7"},"\u7528\u6cd5\u5b9e\u4f8b"),(0,r.kt)("p",null,"\u5217\u51fa\u81ea\u4e0a\u4e00\u4e2a\u6807\u8bb0\u7248\u672c\u4ee5\u6765\u5df2\u66f4\u6539\u7684\u672c\u5730\u8f6f\u4ef6\u5305, ",(0,r.kt)("inlineCode",{parentName:"p"},"lerna changed")," \u7684\u8f93\u51fa\u5c06\u662f\u4e0b\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"lerna version")," \u6216\u8005 ",(0,r.kt)("inlineCode",{parentName:"p"},"lerna publish")," \u7684\u8f6f\u4ef6\u5305\u5217\u8868"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note: ",(0,r.kt)("inlineCode",{parentName:"strong"},"lerna.json")," \u914d\u7f6e ",(0,r.kt)("inlineCode",{parentName:"strong"},"lerna publish")," \u548c ",(0,r.kt)("inlineCode",{parentName:"strong"},"lerna version")," \u4e5f\u5f71\u54cd ",(0,r.kt)("inlineCode",{parentName:"strong"},"lerna changed"),"\uff0c\u5982",(0,r.kt)("inlineCode",{parentName:"strong"},"command.publish.ignoreChanges")),"\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"lerna changed\n")),(0,r.kt)("h3",{id:"\u547d\u4ee4\u9009\u9879-7"},"\u547d\u4ee4\u9009\u9879"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"\u547d\u4ee4\u9009\u9879\uff1a\n\xa0\xa0--conventional-graduate   \u68c0\u6d4b\u5f53\u524d\u9884\u53d1\u5e03\u7684\u8f6f\u4ef6\u5305, \u8fd9\u4e9b\u8f6f\u4ef6\u5305\u5c06\u66f4\u6539\u4e3a\u975e\u9884\u53d1\u5e03\u7248\u672c\u3002\n\xa0\xa0--force-publish           \u5728\u68c0\u6d4b\u5230\u5df2\u66f4\u6539\u7684\u8f6f\u4ef6\u5305\u65f6\u59cb\u7ec8\u5305\u62ec\u76ee\u6807\u8f6f\u4ef6\u5305, \u8df3\u8fc7\u9ed8\u8ba4\u903b\u8f91\u3002\n\xa0\xa0--ignore-changes          \u5f53\u68c0\u6d4b\u5230\u5df2\u66f4\u6539\u7684\u8f6f\u4ef6\u5305\u65f6, \u5ffd\u7565\u4e0eglob\u5339\u914d\u7684\u6587\u4ef6\u4e2d\u7684\u66f4\u6539\u3002\u901a\u8fc7--no-ignore-changes\u5b8c\u5168\u7981\u7528\u3002\n\xa0\xa0--include-merged-tags     \u5f53\u68c0\u6d4b\u5230\u66f4\u6539\u7684\u8f6f\u4ef6\u5305\u65f6, \u5305\u62ec\u6765\u81ea\u5408\u5e76\u5206\u652f\u7684\u6807\u7b7e\u3002\n\n\u8f93\u51fa\u9009\u9879\uff1a\n\xa0\xa0--json            \u5c06\u4fe1\u606f\u663e\u793a\u4e3aJSON\u6570\u7ec4\n\xa0\xa0--ndjson          \u4ee5\u6362\u884c\u7b26\u5206\u9694\u7684JSON\u663e\u793a\u4fe1\u606f\n\xa0\xa0-a, --all         \u663e\u793a\u901a\u5e38\u9690\u85cf\u7684\u79c1\u4eba\u8f6f\u4ef6\u5305\n\xa0\xa0-l, --long        \u663e\u793a\u6269\u5c55\u4fe1\u606f\n\xa0\xa0-p, --parseable   \u663e\u793a\u53ef\u89e3\u6790\u7684\u8f93\u51fa, \u800c\u4e0d\u662f\u5217\u89c6\u56fe\n\xa0\xa0--toposort        \u6309\u7167\u76ee\u5f55\u7684\u62d3\u6251\u987a\u5e8f\u800c\u4e0d\u662f\u6309\u8bcd\u6cd5\u5bf9\u5305\u8fdb\u884c\u6392\u5e8f\n\xa0\xa0--graph           \u5c06\u4f9d\u8d56\u5173\u7cfb\u56fe\u663e\u793a\u4e3aJSON\u683c\u5f0f\u7684\u90bb\u63a5\u8868\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4e0d\u652f\u6301",(0,r.kt)("a",{parentName:"li",href:"https://www.npmjs.com/package/@lerna/filter-options"},"\u8fc7\u6ee4\u5668\u9009\u9879")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"lerna.json"),"\u7684\u914d\u7f6e\u5f71\u54cd\u4e86",(0,r.kt)("inlineCode",{parentName:"li"},"lerna publish")," \u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"lerna version"),",\u540c\u65f6\u4e5f\u5f71\u54cd",(0,r.kt)("inlineCode",{parentName:"li"},"lerna changed"))),(0,r.kt)("h2",{id:"lerna-diff-package"},"lerna diff ","[package?]"),(0,r.kt)("p",null,"\u81ea\u4e0a\u6b21\u53d1\u884c\u4ee5\u6765, \u6bd4\u8f83\u6240\u6709\u8f6f\u4ef6\u5305\u6216\u5355\u4e2a\u8f6f\u4ef6\u5305\u3002"),(0,r.kt)("h3",{id:"\u7528\u6cd5\u5b9e\u4f8b-8"},"\u7528\u6cd5\u5b9e\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"lerna diff soul-gem\n")),(0,r.kt)("h3",{id:"\u547d\u4ee4\u9009\u9879-8"},"\u547d\u4ee4\u9009\u9879"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"--ignore-changes \u5ffd\u7565\u4e0eglob\u5339\u914d\u7684\u6587\u4ef6\u4e2d\u7684\u66f4\u6539\u3002\n")),(0,r.kt)("h2",{id:"lerna-run-script"},"lerna run ","[script]"),(0,r.kt)("p",null,"\u5728\u5305\u542b\u8be5\u811a\u672c\u7684\u6bcf\u4e2a\u8f6f\u4ef6\u5305\u4e2d \u8fd0\u884c\u4e00\u4e2a",(0,r.kt)("a",{parentName:"p",href:"https://docs.npmjs.com/misc/scripts"},"npm"),"\u811a\u672c\u3002"),(0,r.kt)("h3",{id:"\u7528\u6cd5\u5b9e\u4f8b-9"},"\u7528\u6cd5\u5b9e\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"lerna run test\n")),(0,r.kt)("h3",{id:"\u547d\u4ee4\u9009\u9879-9"},"\u547d\u4ee4\u9009\u9879"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"--npm-client \u53ef\u6267\u884c\u6587\u4ef6\uff0c\u7528\u4e8e\u8fd0\u884c\u811a\u672c\uff08npm\uff0cyarn\uff0cpnpm\u7b49\uff09\u3002 \u9ed8\u8ba4\u662fnpm\n\n--stream \u4ee5\u5305\u4e3a\u524d\u7f00\u7684\u884c\u7684\u6d41\u8f93\u51fa\u3002 [\u5e03\u5c14]\n\n--parallel \u8fd0\u884c\u811a\u672c\uff0c\u5e76\u53d1\u65e0\u9650\uff0c\u6d41\u5f0f\u8f93\u51fa\u524d\u7f00\u3002 [\u5e03\u5c14]\n\n--no-bail \u5c3d\u7ba1\u7ed9\u5b9a\u8f6f\u4ef6\u5305\u4e2d\u7684\u9000\u51fa\u975e\u96f6\uff0c\u4ecd\u7ee7\u7eed\u8fd0\u884c\u811a\u672c\u3002 [\u5e03\u5c14]\n\n--no-prefix \u4e0d\u4e3a\u6d41\u8f93\u51fa\u6dfb\u52a0\u524d\u7f00\u3002 [\u5e03\u5c14]\n\n--profile \u914d\u7f6e\u6587\u4ef6\u811a\u672c\u6267\u884c\uff0c\u5e76\u5c06\u6027\u80fd\u914d\u7f6e\u6587\u4ef6\u8f93\u51fa\u5230\u9ed8\u8ba4\u4f4d\u7f6e\u3002 [\u5e03\u5c14]\n\n--profile-location \u5c06\u6027\u80fd\u914d\u7f6e\u6587\u4ef6\u8f93\u51fa\u5230\u81ea\u5b9a\u4e49\u4f4d\u7f6e\uff0c\u800c\u4e0d\u662f\u9ed8\u8ba4\u9879\u76ee\u6839\u76ee\u5f55\u3002\n")),(0,r.kt)("h2",{id:"lerna-link"},"lerna link"),(0,r.kt)("p",null,"\u5c06\u6240\u6709\u76f8\u4e92\u4f9d\u8d56\u7684\u5305\u7b26\u53f7\u94fe\u63a5\u5728\u4e00\u8d77"),(0,r.kt)("h3",{id:"\u7528\u6cd5\u5b9e\u4f8b-10"},"\u7528\u6cd5\u5b9e\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"lerna link\n")),(0,r.kt)("h3",{id:"\u547d\u4ee4\u9009\u9879-10"},"\u547d\u4ee4\u9009\u9879"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"\u547d\u4ee4\uff1a\n\xa0\xa0 lerna link convert # \u5c06\u672c\u5730\u540c\u7ea7\u7248\u672c\u8303\u56f4\u66ff\u6362\u4e3a\u76f8\u5bf9\u6587\u4ef6: \u8bf4\u660e\u7b26\n\n\u547d\u4ee4\u9009\u9879\uff1a\n\xa0\xa0 --force-local \u5f3a\u5236\u672c\u5730\u540c\u7ea7\u94fe\u63a5, \u800c\u4e0d\u8003\u8651\u7248\u672c\u8303\u56f4\u662f\u5426\u5339\u914d[\u5e03\u5c14]\n\xa0\xa0 --contents    \u7528\u4f5c\u7b26\u53f7\u94fe\u63a5\u6e90\u7684\u5b50\u76ee\u5f55\u3002 \u5fc5\u987b\u9002\u7528\u4e8e\u6240\u6709\u5305\u88c5\n")),(0,r.kt)("h2",{id:"lerna-list"},"lerna list"),(0,r.kt)("p",null,"\u5217\u51fa\u5f53\u524d",(0,r.kt)("inlineCode",{parentName:"p"},"Lerna"),"\u5b58\u50a8\u5e93\u4e2d\u7684\u6240\u6709\u516c\u5171\u8f6f\u4ef6\u5305\u3002"),(0,r.kt)("h3",{id:"\u7528\u6cd5\u5b9e\u4f8b-11"},"\u7528\u6cd5\u5b9e\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"lerna list\n\nlerna ls\n")),(0,r.kt)("h3",{id:"\u547d\u4ee4\u9009\u9879-11"},"\u547d\u4ee4\u9009\u9879"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"\u547d\u4ee4\u9009\u9879\uff1a\n\xa0\xa0--json          \u5c06\u4fe1\u606f\u663e\u793a\u4e3aJSON\u6570\u7ec4\n\xa0\xa0--ndjson        \u4ee5\u6362\u884c\u7b26\u5206\u9694\u7684JSON\u663e\u793a\u4fe1\u606f\n\xa0\xa0-a, --all       \u663e\u793a\u901a\u5e38\u9690\u85cf\u7684\u79c1\u4eba\u8f6f\u4ef6\u5305\n\xa0\xa0-l, --long      \u663e\u793a\u6269\u5c55\u4fe1\u606f\n\xa0\xa0-p, --parseable \u663e\u793a\u53ef\u89e3\u6790\u7684\u8f93\u51fa, \u800c\u4e0d\u662f\u5217\u89c6\u56fe\n\xa0\xa0--toposort      \u6309\u7167\u76ee\u5f55\u7684\u62d3\u6251\u987a\u5e8f\u800c\u4e0d\u662f\u6309\u8bcd\u6cd5\u5bf9\u5305\u8fdb\u884c\u6392\u5e8f\n\xa0\xa0--graph         \u5c06\u4f9d\u8d56\u5173\u7cfb\u56fe\u663e\u793a\u4e3aJSON\u683c\u5f0f\u7684\u90bb\u63a5\u8868\n")),(0,r.kt)("h2",{id:"lerna-clean"},"lerna clean"),(0,r.kt)("p",null,"\u4ece\u6240\u6709\u8f6f\u4ef6\u5305\u4e2d\u5220\u9664 ",(0,r.kt)("inlineCode",{parentName:"p"},"node_modules")," \u76ee\u5f55"),(0,r.kt)("h3",{id:"\u7528\u6cd5\u5b9e\u4f8b-12"},"\u7528\u6cd5\u5b9e\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"lerna clean -y\n")),(0,r.kt)("h3",{id:"\u547d\u4ee4\u9009\u9879-12"},"\u547d\u4ee4\u9009\u9879"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"-y, --yes  \u8df3\u8fc7\u6240\u6709\u786e\u8ba4\u63d0\u793a\n")),(0,r.kt)("h2",{id:"lerna-bootstrap-1"},"lerna bootstrap"),(0,r.kt)("p",null,"\u5c06\u672c\u5730\u8f6f\u4ef6\u5305\u94fe\u63a5\u5728\u4e00\u8d77, \u5e76\u5b89\u88c5\u5269\u4f59\u7684\u8f6f\u4ef6\u5305\u4f9d\u8d56\u9879"),(0,r.kt)("h2",{id:"\u7528\u6cd5\u5b9e\u4f8b-13"},"\u7528\u6cd5\u5b9e\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"lerna bootstrap\n")),(0,r.kt)("h2",{id:"\u547d\u4ee4\u9009\u9879-13"},"\u547d\u4ee4\u9009\u9879"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"\xa0--hoist               \u5b89\u88c5\u4e0e[glob]\u5339\u914d\u5230repo root\u7684\u5916\u90e8\u4f9d\u8d56\u9879\n\xa0--nohoist             \u4e0d\u8981\u63d0\u5347\u5c06[glob]\u5339\u914d\u5230repo root\u7684\u5916\u90e8\u4f9d\u8d56\u9879\n\xa0--ignore-prepublish   \u4e0d\u8981\u5728\u5f15\u5bfc\u7a0b\u5e8f\u5305\u4e2d\u8fd0\u884c\u9884\u53d1\u5e03\u7684\u751f\u547d\u5468\u671f\u811a\u672c\u3002\n\xa0--ignore-scripts      \u4e0d\u8981\u5728 bootstrap \u7a0b\u5e8f\u5305\u4e2d\u8fd0\u884c_any_\u751f\u547d\u5468\u671f\u811a\u672c\n\xa0--npm-client          \u53ef\u6267\u884c\u6587\u4ef6, \u7528\u4e8e\u5b89\u88c5\u4f9d\u8d56\u9879\uff08npm, yarn, pnpm\u7b49\uff09\n\xa0--registry            \u5c06\u6307\u5b9a\u7684\u6ce8\u518c\u8868\u7528\u4e8e\u6240\u6709npm\u5ba2\u6237\u7aef\u64cd\u4f5c\u3002\n\xa0--strict              \u63d0\u5347\u65f6\u4e0d\u5141\u8bb8\u8b66\u544a, \u56e0\u4e3a\u5b83\u4f1a\u5bfc\u81f4\u66f4\u957f\u7684 bootstrap \u65f6\u95f4\u548c\u5176\u4ed6 issue\u3002\n\xa0--use-workspaces      \u542f\u7528\u4e0eYarn\u5de5\u4f5c\u533a\u7684\u96c6\u6210\u3002\n\xa0--force-local         \u5f3a\u5236\u672c\u5730\u540c\u7ea7\u94fe\u63a5, \u800c\u4e0d\u8003\u8651\u7248\u672c\u8303\u56f4\u662f\u5426\u5339\u914d\n\xa0--contents            \u7528\u4f5c\u4efb\u4f55\u94fe\u63a5\u6e90\u7684\u5b50\u76ee\u5f55\u3002\u5fc5\u987b\u9002\u7528\u4e8e\u6240\u6709\u8f6f\u4ef6\u5305\u3002\n")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"lerna-bootstrap.png",src:a(11335).Z})),(0,r.kt)("h2",{id:"lerna-publish-1"},"lerna publish"),(0,r.kt)("p",null,"\u5728\u5f53\u524d\u9879\u76ee\u4e2d\u53d1\u5e03\u8f6f\u4ef6\u5305\u3002"),(0,r.kt)("h2",{id:"\u7528\u6cd5\u5b9e\u4f8b-14"},"\u7528\u6cd5\u5b9e\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"lerna publish [bump]\n\nlerna publish --content lib \uff03\u53d1\u5e03\u6bcf\u4e2a\u7531Lerna\u7ba1\u7406\u7684\u8f6f\u4ef6\u5305\u7684 `dist` \u5b50\u6587\u4ef6\u5939\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"bump: (\u4f4d\u7f6e)")),(0,r.kt)("p",null,"\u901a\u8fc7\u663e\u5f0f\u7248\u672c",(0,r.kt)("em",{parentName:"p"},"\u6216")," semver \u5173\u952e\u5b57\u589e\u52a0\u7248\u672c"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u7248\u672c"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"major"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"minor"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"patch"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"premajor"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"preminor"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"prepatch"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"prerelease"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"from-git"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"from-package")))))),(0,r.kt)("h2",{id:"\u547d\u4ee4\u9009\u9879-14"},"\u547d\u4ee4\u9009\u9879"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"  -c, --canary        \u6bcf\u6b21\u6210\u529f\u5408\u5e76\u540e, \u4f7f\u7528sha\u4f5c\u4e3a\u6807\u7b7e\u7684\u4e00\u90e8\u5206\u53d1\u5e03\u8f6f\u4ef6\u5305\u3002 [\u5e03\u5c14]\n\xa0\xa0--preid             \u5728\u53d1\u5e03\u9884\u53d1\u884c\u7248\u672c\u65f6\u6307\u5b9a\u9884\u53d1\u884c\u7248\u672c\u6807\u8bc6\u7b26\u3002\n\xa0\xa0--contents          \u6307\u5b9a\u8981\u53d1\u5e03\u7684\u5b50\u76ee\u5f55\uff0c\u5e94\u7528\u4e8e\u6240\u6709 `Lerna` \u7ba1\u7406\u7684\u5305\u542b `package.json` \u6587\u4ef6\u7684\u8f6f\u4ef6\u5305\uff0c\u7a0b\u5e8f\u5305\u751f\u547d\u5468\u671f\u4ecd\u5c06\u5728\u539f\u59cb\u76ee\u5f55\u4e2d\u8fd0\u884c\n\xa0\xa0--dist-tag          \u4f7f\u7528\u6307\u5b9a\u7684npm dist-tag\u53d1\u5e03\u8f6f\u4ef6\u5305\n\xa0\xa0--legacy-auth       \u65e7\u7248Base64\u7f16\u7801\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002 [\u5f26]\n\xa0\xa0--pre-dist-tag      \u4f7f\u7528\u6307\u5b9a\u7684npm dist-tag\u53d1\u5e03\u9884\u53d1\u884c\u8f6f\u4ef6\u5305\u3002\n\xa0\xa0--git-head          \u6253\u5305tar\u5305\u65f6\u5c06SHA\u663e\u5f0f\u8bbe\u7f6e\u4e3agitHead, \u4ec5\u5728'from-package'\u4f4d\u7f6e\u5141\u8bb8\u3002 [\u5f26]\n\xa0\xa0--graph-type        \u786e\u5b9a\u7a0b\u5e8f\u5305\u5c42\u6b21\u7ed3\u6784\u65f6\u8981\u4f7f\u7528\u7684\u4f9d\u8d56\u9879\u7c7b\u578b\u3002 [\u4efb\u9009\u503c\uff1a\u201c all\u201d, \u201c dependencies\u201d]\n\xa0\xa0--ignore-prepublish \u7981\u7528\u4e0d\u63a8\u8350\u4f7f\u7528\u7684\u201c\u9884\u53d1\u5e03\u201d\u751f\u547d\u5468\u671f\u811a\u672c[\u5e03\u5c14]\n\xa0\xa0--ignore-scripts    \u7981\u7528\u6240\u6709\u751f\u547d\u5468\u671f\u811a\u672c[\u5e03\u5c14]\n\xa0\xa0--otp               \u63d0\u4f9b\u4e00\u6b21\u6027\u5bc6\u7801, \u7528\u4e8e\u901a\u8fc7\u4e24\u56e0\u7d20\u8eab\u4efd\u9a8c\u8bc1\u8fdb\u884c\u53d1\u5e03\u3002 [\u5f26]\n\xa0\xa0--registry          \u5c06\u6307\u5b9a\u7684\u6ce8\u518c\u8868\u7528\u4e8e\u6240\u6709npm\u5ba2\u6237\u7aef\u64cd\u4f5c\u3002 [\u5f26]\n\xa0\xa0--require-scripts   \u76f8\u5bf9\u4e8e\u8f6f\u4ef6\u5305\u6839\u76ee\u5f55\u6267\u884c./scripts/prepublish.js\u548c./scripts/postpublish.js\u3002 [\u5e03\u5c14]\n\xa0\xa0--no-git-reset      \u53d1\u5e03\u5b8c\u6210\u540e, \u8bf7\u52ff\u5c06\u66f4\u6539\u91cd\u7f6e\u4e3a\u5de5\u4f5c\u6811\u3002 [\u5e03\u5c14]\n\xa0\xa0--temp-tag          \u53d1\u5e03\u65f6\u521b\u5efa\u4e00\u4e2a\u4e34\u65f6\u6807\u7b7e\u3002 [\u5e03\u5c14]\n\xa0\xa0--no-verify-access  \u4e0d\u9a8c\u8bc1\u5f53\u524dnpm\u7528\u6237\u7684\u8f6f\u4ef6\u5305\u8bfb\u5199\u6743\u9650\u3002 [\u5e03\u5c14]\n\xa0\xa0-y, --yes           \u8df3\u8fc7\u6240\u6709\u786e\u8ba4\u63d0\u793a\u3002\n")),(0,r.kt)("h2",{id:"\u53c2\u8003\u8d44\u6599"},"\u53c2\u8003\u8d44\u6599"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://lerna.js.org/"},"Lerna \u5b98\u65b9\u6587\u6863")))}c.isMDXComponent=!0},11335:function(e,n,a){n.Z=a.p+"assets/images/lerna-bootstrap-60dcadf0444e7de90329623acf93ab8f.png"},10102:function(e,n,a){n.Z=a.p+"assets/images/lerna-create-pkg-747bdcf0f0c7d567ebe9430af38ed0c7.png"},27736:function(e,n,a){n.Z=a.p+"assets/images/lerna-create-98aca8d04b36f79c243a300372619b63.png"},15884:function(e,n,a){n.Z=a.p+"assets/images/lerna-init-i-df4ec790f7b68a20590c435dfe920baa.png"}}]);